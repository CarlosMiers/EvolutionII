<?xml version="1.0" encoding="UTF-8"?>
<jasperReport xmlns="http://jasperreports.sourceforge.net/jasperreports" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:schemaLocation="http://jasperreports.sourceforge.net/jasperreports http://jasperreports.sourceforge.net/xsd/jasperreport.xsd" name="factura_inmobiliaria" pageWidth="623" pageHeight="396" columnWidth="583" leftMargin="20" rightMargin="20" topMargin="20" bottomMargin="20" uuid="93882305-3ed4-41fa-a0ae-9e55b511881d">
	<property name="ireport.zoom" value="1.0"/>
	<property name="ireport.x" value="0"/>
	<property name="ireport.y" value="0"/>
	<parameter name="cNombreEmpresa" class="java.lang.String"/>
	<parameter name="cReferencia" class="java.lang.String"/>
	<parameter name="Letra" class="java.lang.String"/>
	<queryString>
		<![CDATA[SELECT creferencia,factura,DAY(fecha) AS dia,YEAR(fecha) AS anual,vencimiento,cliente,clientes.nombre,clientes.ruc,
IFNULL(ROUND((`cabecera_ventas`.`exentas` * `cabecera_ventas`.`cotizacion`),0),0) AS `totalexentas`,
IFNULL(ROUND(((`cabecera_ventas`.`gravadas10` * `cabecera_ventas`.`cotizacion`) / 11),0),0) AS `totaliva10`,
IFNULL(ROUND(((`cabecera_ventas`.`gravadas5` * `cabecera_ventas`.`cotizacion`) / 21),0),0) AS `totaliva5`,
comprobante,moneda,gravadas10,totalneto,
CASE MONTH(fecha)
  WHEN 1 THEN 'ENERO'
  WHEN 2 THEN 'FEBRERO'
  WHEN 3 THEN 'MARZO'
  WHEN 4 THEN 'ABRIL'
  WHEN 5 THEN 'MAYO'
  WHEN 6 THEN 'JUNIO'
  WHEN 7 THEN 'JULIO'
  WHEN 8 THEN 'AGOSTO'
  WHEN 9 THEN 'SETIEMBRE'
  WHEN 10 THEN 'OCTUBRE'
  WHEN 11 THEN 'NOVIEMBRE'
  WHEN 12 THEN 'DICIEMBRE'
END AS nombremes,
detalle_ventas.codprod,detalle_ventas.cantidad,detalle_ventas.precio,
detalle_ventas.monto,detalle_ventas.impiva,
CAST(detalle_ventas.porcentaje AS CHAR) iva,detalle_ventas.porcentaje,
productos.nombre as nombreproducto
FROM cabecera_ventas
LEFT JOIN clientes
ON clientes.codigo=cabecera_ventas.cliente
LEFT JOIN detalle_ventas
ON detalle_ventas.dreferencia=cabecera_ventas.creferencia
LEFT JOIN productos
ON productos.codigo=detalle_ventas.codprod
WHERE cabecera_ventas.creferencia=$P{cReferencia}]]>
	</queryString>
	<field name="creferencia" class="java.lang.String">
		<fieldDescription><![CDATA[]]></fieldDescription>
	</field>
	<field name="factura" class="java.math.BigDecimal">
		<fieldDescription><![CDATA[]]></fieldDescription>
	</field>
	<field name="dia" class="java.lang.Long"/>
	<field name="anual" class="java.lang.Long">
		<fieldDescription><![CDATA[]]></fieldDescription>
	</field>
	<field name="vencimiento" class="java.sql.Date">
		<fieldDescription><![CDATA[]]></fieldDescription>
	</field>
	<field name="cliente" class="java.lang.Integer">
		<fieldDescription><![CDATA[]]></fieldDescription>
	</field>
	<field name="nombre" class="java.lang.String">
		<fieldDescription><![CDATA[]]></fieldDescription>
	</field>
	<field name="ruc" class="java.lang.String">
		<fieldDescription><![CDATA[]]></fieldDescription>
	</field>
	<field name="totalexentas" class="java.math.BigDecimal">
		<fieldDescription><![CDATA[]]></fieldDescription>
	</field>
	<field name="totaliva10" class="java.math.BigDecimal">
		<fieldDescription><![CDATA[]]></fieldDescription>
	</field>
	<field name="totaliva5" class="java.math.BigDecimal">
		<fieldDescription><![CDATA[]]></fieldDescription>
	</field>
	<field name="comprobante" class="java.lang.Integer">
		<fieldDescription><![CDATA[]]></fieldDescription>
	</field>
	<field name="moneda" class="java.lang.Integer">
		<fieldDescription><![CDATA[]]></fieldDescription>
	</field>
	<field name="gravadas10" class="java.math.BigDecimal">
		<fieldDescription><![CDATA[]]></fieldDescription>
	</field>
	<field name="totalneto" class="java.math.BigDecimal">
		<fieldDescription><![CDATA[]]></fieldDescription>
	</field>
	<field name="nombremes" class="java.lang.String"/>
	<field name="codprod" class="java.lang.String">
		<fieldDescription><![CDATA[]]></fieldDescription>
	</field>
	<field name="cantidad" class="java.math.BigDecimal">
		<fieldDescription><![CDATA[]]></fieldDescription>
	</field>
	<field name="precio" class="java.math.BigDecimal">
		<fieldDescription><![CDATA[]]></fieldDescription>
	</field>
	<field name="monto" class="java.math.BigDecimal">
		<fieldDescription><![CDATA[]]></fieldDescription>
	</field>
	<field name="impiva" class="java.math.BigDecimal">
		<fieldDescription><![CDATA[]]></fieldDescription>
	</field>
	<field name="iva" class="java.lang.String">
		<fieldDescription><![CDATA[]]></fieldDescription>
	</field>
	<field name="porcentaje" class="java.math.BigDecimal">
		<fieldDescription><![CDATA[]]></fieldDescription>
	</field>
	<field name="nombreproducto" class="java.lang.String"/>
	<background>
		<band splitType="Stretch"/>
	</background>
	<pageHeader>
		<band height="131" splitType="Stretch">
			<textField>
				<reportElement x="79" y="105" width="383" height="10" uuid="28c3f9a7-4f38-4af4-b211-301d8264b7c3"/>
				<textElement>
					<font fontName="Verdana" size="8"/>
				</textElement>
				<textFieldExpression><![CDATA[$F{nombre}]]></textFieldExpression>
			</textField>
			<textField>
				<reportElement x="63" y="61" width="225" height="14" uuid="94256565-6e69-464a-9946-a85fa6dcdde4"/>
				<textElement>
					<font fontName="Verdana" size="8" isBold="true"/>
				</textElement>
				<textFieldExpression><![CDATA["AsunciÃ³n, "+$F{dia}+" de "+$F{nombremes}+" de "+$F{anual}+"."]]></textFieldExpression>
			</textField>
			<textField isBlankWhenNull="true">
				<reportElement x="511" y="57" width="23" height="11" uuid="387b4f41-ea24-47c9-8a59-c0820da5ac38"/>
				<textElement textAlignment="Right">
					<font fontName="Verdana" size="8" isBold="true"/>
				</textElement>
				<textFieldExpression><![CDATA[( $F{comprobante}.equals( new Integer(2)) ? "X" : "" )]]></textFieldExpression>
			</textField>
			<textField>
				<reportElement x="18" y="88" width="61" height="10" uuid="f08769cc-8b74-424a-a8c0-d13b6950d167"/>
				<textElement>
					<font fontName="Lucida Sans" size="8"/>
				</textElement>
				<textFieldExpression><![CDATA[$F{ruc}]]></textFieldExpression>
			</textField>
			<textField isBlankWhenNull="true">
				<reportElement x="434" y="58" width="23" height="11" uuid="0c25340b-6b30-4b90-bd7c-e9defa33669a"/>
				<textElement textAlignment="Right">
					<font fontName="Verdana" size="8" isBold="true"/>
				</textElement>
				<textFieldExpression><![CDATA[( $F{comprobante}.equals( new Integer(1)) ? "X" : "" )]]></textFieldExpression>
			</textField>
		</band>
	</pageHeader>
	<detail>
		<band height="12" splitType="Stretch">
			<textField pattern="#,##0">
				<reportElement x="498" y="2" width="53" height="10" uuid="5553453f-3f8e-447d-a700-c0d474edc0e3">
					<printWhenExpression><![CDATA[$F{iva}.equals("10.00")]]></printWhenExpression>
				</reportElement>
				<textElement textAlignment="Right">
					<font fontName="Lucida Sans" size="7"/>
				</textElement>
				<textFieldExpression><![CDATA[$F{monto}]]></textFieldExpression>
			</textField>
			<textField pattern="###0">
				<reportElement x="50" y="2" width="17" height="10" uuid="2bbf6e46-b87e-48a8-a140-ae1bb25b2fdc"/>
				<textElement textAlignment="Right">
					<font fontName="Lucida Sans" size="7"/>
				</textElement>
				<textFieldExpression><![CDATA[$F{cantidad}]]></textFieldExpression>
			</textField>
			<textField pattern="#,##0">
				<reportElement x="272" y="2" width="54" height="10" uuid="d5612366-0199-4522-9861-96155f0ddbc0"/>
				<textElement textAlignment="Right">
					<font fontName="Lucida Sans" size="7"/>
				</textElement>
				<textFieldExpression><![CDATA[$F{precio}]]></textFieldExpression>
			</textField>
			<textField pattern="#,##0">
				<reportElement x="358" y="2" width="52" height="10" uuid="86890dc8-38be-433e-b21b-8b8ee2c2a054">
					<printWhenExpression><![CDATA[$F{iva}.equals( "0.00")]]></printWhenExpression>
				</reportElement>
				<textElement textAlignment="Right">
					<font fontName="Lucida Sans" size="7"/>
				</textElement>
				<textFieldExpression><![CDATA[$F{monto}]]></textFieldExpression>
			</textField>
			<textField pattern="#,##0">
				<reportElement x="435" y="2" width="58" height="10" uuid="45935672-9007-40b2-b2f4-75b9209afd3c">
					<printWhenExpression><![CDATA[$F{iva}.equals("5.00")]]></printWhenExpression>
				</reportElement>
				<textElement textAlignment="Right">
					<font fontName="Lucida Sans" size="7"/>
				</textElement>
				<textFieldExpression><![CDATA[$F{monto}]]></textFieldExpression>
			</textField>
			<textField>
				<reportElement x="83" y="2" width="185" height="10" uuid="ee6c2ccb-9e66-447b-b631-5ac7b3b6c691"/>
				<textElement>
					<font fontName="Verdana" size="7"/>
				</textElement>
				<textFieldExpression><![CDATA[$F{nombreproducto}]]></textFieldExpression>
			</textField>
			<textField>
				<reportElement x="3" y="2" width="42" height="10" uuid="5d0cc09c-c043-4502-a0dc-e48ee3b48d2e"/>
				<textElement textAlignment="Right">
					<font fontName="Lucida Sans" size="7"/>
				</textElement>
				<textFieldExpression><![CDATA[$F{codprod}]]></textFieldExpression>
			</textField>
		</band>
	</detail>
	<pageFooter>
		<band height="65" splitType="Stretch">
			<textField pattern="#,##0.00">
				<reportElement x="360" y="45" width="74" height="10" uuid="e8452f53-542a-48ba-96d0-6acd23b1cd12"/>
				<textElement textAlignment="Right">
					<font fontName="Lucida Sans" size="8"/>
				</textElement>
				<textFieldExpression><![CDATA[$F{totaliva5}.add($F{totaliva10})]]></textFieldExpression>
			</textField>
			<textField pattern="#,##0.00">
				<reportElement x="107" y="47" width="73" height="10" uuid="3bdb4b11-acb8-45be-9b07-e3455aa30bb7"/>
				<textElement textAlignment="Right">
					<font fontName="Lucida Sans" size="8"/>
				</textElement>
				<textFieldExpression><![CDATA[$F{totaliva5}]]></textFieldExpression>
			</textField>
			<textField evaluationTime="Page" pattern="#,##0">
				<reportElement x="439" y="14" width="54" height="10" uuid="8af56533-fb85-4b77-80b3-239620a6658a"/>
				<textElement textAlignment="Right">
					<font fontName="Lucida Sans" size="8"/>
				</textElement>
				<textFieldExpression><![CDATA[$F{totaliva5}]]></textFieldExpression>
			</textField>
			<textField evaluationTime="Page" pattern="#,##0">
				<reportElement x="356" y="14" width="54" height="10" uuid="84c270f7-da9e-4152-a05d-1f611fd7649f"/>
				<textElement textAlignment="Right">
					<font fontName="Lucida Sans" size="8"/>
				</textElement>
				<textFieldExpression><![CDATA[$F{totalexentas}]]></textFieldExpression>
			</textField>
			<textField pattern="#,##0">
				<reportElement x="491" y="14" width="60" height="10" uuid="3c121638-d7cd-4794-b1e9-2eee11959ea1"/>
				<textElement textAlignment="Right">
					<font fontName="Lucida Sans" size="8"/>
				</textElement>
				<textFieldExpression><![CDATA[$F{gravadas10}]]></textFieldExpression>
			</textField>
			<textField>
				<reportElement x="18" y="24" width="417" height="10" uuid="062c9d98-c4c3-42f0-9726-cc21241eda05"/>
				<textElement>
					<font fontName="Verdana" size="8"/>
				</textElement>
				<textFieldExpression><![CDATA[$P{Letra}+"-"]]></textFieldExpression>
			</textField>
			<textField pattern="#,##0.00">
				<reportElement x="234" y="45" width="73" height="10" uuid="63b8c994-f1f4-41ab-8b1a-9bc628cea44f"/>
				<textElement textAlignment="Right">
					<font fontName="Lucida Sans" size="8"/>
				</textElement>
				<textFieldExpression><![CDATA[$F{totaliva10}]]></textFieldExpression>
			</textField>
			<textField pattern="#,##0">
				<reportElement x="491" y="24" width="60" height="10" uuid="ca4a2850-149b-445c-bef6-208d438c6e9c"/>
				<textElement textAlignment="Right">
					<font fontName="Lucida Sans" size="8"/>
				</textElement>
				<textFieldExpression><![CDATA[$F{totalneto}]]></textFieldExpression>
			</textField>
		</band>
	</pageFooter>
</jasperReport>
