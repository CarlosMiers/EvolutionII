<?xml version="1.0" encoding="UTF-8"?>
<jasperReport xmlns="http://jasperreports.sourceforge.net/jasperreports" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:schemaLocation="http://jasperreports.sourceforge.net/jasperreports http://jasperreports.sourceforge.net/xsd/jasperreport.xsd" name="factura_propisur" printOrder="Horizontal" pageWidth="623" pageHeight="396" columnWidth="623" leftMargin="0" rightMargin="0" topMargin="0" bottomMargin="0" uuid="15724193-b574-49f8-865b-f4df501516b8">
	<property name="ireport.zoom" value="1.0"/>
	<property name="ireport.x" value="0"/>
	<property name="ireport.y" value="0"/>
	<parameter name="SUBREPORT_DIR" class="java.lang.String" isForPrompting="false">
		<defaultValueExpression><![CDATA["C:\\Sistemas\\EvolutionII\\EvolutionII\\src\\Reports\\"]]></defaultValueExpression>
	</parameter>
	<parameter name="cNombreEmpresa" class="java.lang.String"/>
	<parameter name="cReferencia" class="java.lang.String"/>
	<parameter name="Letra" class="java.lang.String"/>
	<queryString>
		<![CDATA[SELECT cabecera_ventas.creferencia,cabecera_ventas.factura,DAY(cabecera_ventas.fecha) AS dia,YEAR(fecha) AS anual,
cabecera_ventas.vencimiento,cabecera_ventas.cliente,clientes.nombre,clientes.ruc,
IFNULL(ROUND((`cabecera_ventas`.`exentas` * `cabecera_ventas`.`cotizacion`),0),0) AS `totalexentas`,
IFNULL(ROUND(((`cabecera_ventas`.`gravadas10` * `cabecera_ventas`.`cotizacion`) / 11),0),0) AS `totaliva10`,
IFNULL(ROUND(((`cabecera_ventas`.`gravadas5` * `cabecera_ventas`.`cotizacion`) / 21),0),0) AS `totaliva5`,
cabecera_ventas.comprobante,cabecera_ventas.moneda,cabecera_ventas.gravadas10,
cabecera_ventas.exentas,cabecera_ventas.gravadas5,cabecera_ventas.totalneto,
CASE MONTH(fecha)
  WHEN 1 THEN 'ENERO'
  WHEN 2 THEN 'FEBRERO'
  WHEN 3 THEN 'MARZO'
  WHEN 4 THEN 'ABRIL'
  WHEN 5 THEN 'MAYO'
  WHEN 6 THEN 'JUNIO'
  WHEN 7 THEN 'JULIO'
  WHEN 8 THEN 'AGOSTO'
  WHEN 9 THEN 'SETIEMBRE'
  WHEN 10 THEN 'OCTUBRE'
  WHEN 11 THEN 'NOVIEMBRE'
  WHEN 12 THEN 'DICIEMBRE'
END AS nombremes,
CASE MONTH(detalle_ventas.vence)
  WHEN 1 THEN 'ENERO'
  WHEN 2 THEN 'FEBRERO'
  WHEN 3 THEN 'MARZO'
  WHEN 4 THEN 'ABRIL'
  WHEN 5 THEN 'MAYO'
  WHEN 6 THEN 'JUNIO'
  WHEN 7 THEN 'JULIO'
  WHEN 8 THEN 'AGOSTO'
  WHEN 9 THEN 'SETIEMBRE'
  WHEN 10 THEN 'OCTUBRE'
  WHEN 11 THEN 'NOVIEMBRE'
  WHEN 12 THEN 'DICIEMBRE'
END AS mescobro,
YEAR(detalle_ventas.vence) AS anualcobro,detalle_ventas.edificio,
detalle_ventas.codprod,detalle_ventas.cantidad,detalle_ventas.precio,
detalle_ventas.monto,detalle_ventas.impiva,
CAST(detalle_ventas.porcentaje AS CHAR) iva,detalle_ventas.porcentaje,
productos.nombre AS nombreproducto,
inmuebles.ctactral,inmuebles.diredif,inmuebles.nomedif,
CONCAT(propietarios.nombre,',',propietarios.apellido) AS nombrepropietario
FROM cabecera_ventas
LEFT JOIN clientes
ON clientes.codigo=cabecera_ventas.cliente
LEFT JOIN detalle_ventas
ON detalle_ventas.dreferencia=cabecera_ventas.creferencia
LEFT JOIN productos
ON productos.codigo=detalle_ventas.codprod
LEFT JOIN edificios
ON detalle_ventas.edificio=edificios.idunidad
LEFT JOIN inmuebles
ON inmuebles.idinmueble=edificios.inmueble
LEFT JOIN propietarios
ON propietarios.codpro=inmuebles.codpro
WHERE cabecera_ventas.creferencia=$P{cReferencia}]]>
	</queryString>
	<field name="creferencia" class="java.lang.String">
		<fieldDescription><![CDATA[]]></fieldDescription>
	</field>
	<field name="factura" class="java.math.BigDecimal">
		<fieldDescription><![CDATA[]]></fieldDescription>
	</field>
	<field name="dia" class="java.lang.Long"/>
	<field name="anual" class="java.lang.Long">
		<fieldDescription><![CDATA[]]></fieldDescription>
	</field>
	<field name="vencimiento" class="java.sql.Date">
		<fieldDescription><![CDATA[]]></fieldDescription>
	</field>
	<field name="cliente" class="java.lang.Integer">
		<fieldDescription><![CDATA[]]></fieldDescription>
	</field>
	<field name="nombre" class="java.lang.String">
		<fieldDescription><![CDATA[]]></fieldDescription>
	</field>
	<field name="ruc" class="java.lang.String">
		<fieldDescription><![CDATA[]]></fieldDescription>
	</field>
	<field name="totalexentas" class="java.math.BigDecimal">
		<fieldDescription><![CDATA[]]></fieldDescription>
	</field>
	<field name="totaliva10" class="java.math.BigDecimal">
		<fieldDescription><![CDATA[]]></fieldDescription>
	</field>
	<field name="totaliva5" class="java.math.BigDecimal">
		<fieldDescription><![CDATA[]]></fieldDescription>
	</field>
	<field name="comprobante" class="java.lang.Integer">
		<fieldDescription><![CDATA[]]></fieldDescription>
	</field>
	<field name="moneda" class="java.lang.Integer">
		<fieldDescription><![CDATA[]]></fieldDescription>
	</field>
	<field name="gravadas10" class="java.math.BigDecimal">
		<fieldDescription><![CDATA[]]></fieldDescription>
	</field>
	<field name="exentas" class="java.math.BigDecimal">
		<fieldDescription><![CDATA[]]></fieldDescription>
	</field>
	<field name="gravadas5" class="java.math.BigDecimal">
		<fieldDescription><![CDATA[]]></fieldDescription>
	</field>
	<field name="totalneto" class="java.math.BigDecimal">
		<fieldDescription><![CDATA[]]></fieldDescription>
	</field>
	<field name="nombremes" class="java.lang.String"/>
	<field name="mescobro" class="java.lang.String"/>
	<field name="anualcobro" class="java.lang.Long"/>
	<field name="edificio" class="java.lang.Integer">
		<fieldDescription><![CDATA[]]></fieldDescription>
	</field>
	<field name="codprod" class="java.lang.String">
		<fieldDescription><![CDATA[]]></fieldDescription>
	</field>
	<field name="cantidad" class="java.math.BigDecimal">
		<fieldDescription><![CDATA[]]></fieldDescription>
	</field>
	<field name="precio" class="java.math.BigDecimal">
		<fieldDescription><![CDATA[]]></fieldDescription>
	</field>
	<field name="monto" class="java.math.BigDecimal">
		<fieldDescription><![CDATA[]]></fieldDescription>
	</field>
	<field name="impiva" class="java.math.BigDecimal">
		<fieldDescription><![CDATA[]]></fieldDescription>
	</field>
	<field name="iva" class="java.lang.String">
		<fieldDescription><![CDATA[]]></fieldDescription>
	</field>
	<field name="porcentaje" class="java.math.BigDecimal">
		<fieldDescription><![CDATA[]]></fieldDescription>
	</field>
	<field name="nombreproducto" class="java.lang.String"/>
	<field name="ctactral" class="java.lang.String">
		<fieldDescription><![CDATA[]]></fieldDescription>
	</field>
	<field name="diredif" class="java.lang.String">
		<fieldDescription><![CDATA[]]></fieldDescription>
	</field>
	<field name="nomedif" class="java.lang.String">
		<fieldDescription><![CDATA[]]></fieldDescription>
	</field>
	<field name="nombrepropietario" class="java.lang.String"/>
	<variable name="totaliva5_1" class="java.math.BigDecimal" resetType="Page" calculation="Sum">
		<variableExpression><![CDATA[$F{totaliva5}]]></variableExpression>
	</variable>
	<variable name="totalexentas_1" class="java.math.BigDecimal" resetType="Page" calculation="Sum">
		<variableExpression><![CDATA[$F{totalexentas}]]></variableExpression>
	</variable>
	<pageHeader>
		<band height="191" splitType="Stretch">
			<textField>
				<reportElement x="61" y="129" width="61" height="10" uuid="f06fa5c0-e7ab-4261-b10a-d1fb11ab5986"/>
				<textElement>
					<font fontName="Lucida Sans" size="8"/>
				</textElement>
				<textFieldExpression><![CDATA[$F{ruc}]]></textFieldExpression>
			</textField>
			<textField>
				<reportElement x="122" y="146" width="343" height="10" uuid="b8946176-5ab3-4c7a-8266-f2e4a2204dcb"/>
				<textElement>
					<font fontName="Verdana" size="8"/>
				</textElement>
				<textFieldExpression><![CDATA[$F{nombre}]]></textFieldExpression>
			</textField>
			<textField isBlankWhenNull="true">
				<reportElement x="435" y="95" width="23" height="11" uuid="058b4115-2453-44d7-9d82-302e1f553779"/>
				<textElement textAlignment="Right">
					<font fontName="Verdana" size="8" isBold="true"/>
				</textElement>
				<textFieldExpression><![CDATA[( $F{comprobante}.equals( new Integer(1)) ? "X" : "" )]]></textFieldExpression>
			</textField>
			<textField isBlankWhenNull="true">
				<reportElement x="512" y="94" width="23" height="11" uuid="d18cfa14-be6b-4287-bb48-2b1bb5ea4179"/>
				<textElement textAlignment="Right">
					<font fontName="Verdana" size="8" isBold="true"/>
				</textElement>
				<textFieldExpression><![CDATA[( $F{comprobante}.equals( new Integer(2)) ? "X" : "" )]]></textFieldExpression>
			</textField>
			<textField>
				<reportElement x="106" y="102" width="225" height="14" uuid="b0e99ae9-eebb-4f27-892f-2dfc7c8d4c57"/>
				<textElement>
					<font fontName="Verdana" size="8" isBold="true"/>
				</textElement>
				<textFieldExpression><![CDATA["AsunciÃ³n, "+$F{dia}+" de "+$F{nombremes}+" de "+$F{anual}+"."]]></textFieldExpression>
			</textField>
			<textField>
				<reportElement x="472" y="129" width="95" height="52" uuid="79c4689f-6443-42af-921c-5331b67733c6"/>
				<textElement>
					<font fontName="Lucida Sans" size="8"/>
				</textElement>
				<textFieldExpression><![CDATA["Cta. Ctral "+$F{ctactral}+" Prop. "+$F{nombrepropietario}]]></textFieldExpression>
			</textField>
		</band>
	</pageHeader>
	<detail>
		<band height="16">
			<textField>
				<reportElement x="5" y="5" width="18" height="10" uuid="b804a32d-5f6d-4acb-b002-cf8c1ba3929e"/>
				<textElement textAlignment="Right">
					<font fontName="Lucida Sans" size="7"/>
				</textElement>
				<textFieldExpression><![CDATA[$F{edificio}]]></textFieldExpression>
			</textField>
			<textField pattern="###0">
				<reportElement x="37" y="5" width="17" height="10" uuid="63b0a4b0-7ebc-4425-9d9d-3a3d904513be"/>
				<textElement textAlignment="Right">
					<font fontName="Lucida Sans" size="7"/>
				</textElement>
				<textFieldExpression><![CDATA[$F{cantidad}]]></textFieldExpression>
			</textField>
			<textField>
				<reportElement x="67" y="5" width="215" height="10" uuid="c6b1b1aa-1df4-41a9-ac5a-3c1f292a7cc0"/>
				<textElement>
					<font fontName="Lucida Sans" size="7"/>
				</textElement>
				<textFieldExpression><![CDATA[$F{nombreproducto}+" CORRESPONDIENTE AL MES DE "+$F{mescobro}+"/"+$F{anualcobro}]]></textFieldExpression>
			</textField>
			<textField pattern="#,##0">
				<reportElement x="288" y="5" width="46" height="10" uuid="0ebc73fb-7447-4cda-9ebc-2b834a5bdf3c"/>
				<textElement textAlignment="Right">
					<font fontName="Lucida Sans" size="7"/>
				</textElement>
				<textFieldExpression><![CDATA[$F{precio}]]></textFieldExpression>
			</textField>
			<textField pattern="#,##0">
				<reportElement x="515" y="5" width="53" height="10" uuid="bc019710-1eab-4a54-808f-a3cb8cba14e4">
					<printWhenExpression><![CDATA[$F{iva}.equals("10.00")]]></printWhenExpression>
				</reportElement>
				<textElement textAlignment="Right">
					<font fontName="Lucida Sans" size="7"/>
				</textElement>
				<textFieldExpression><![CDATA[$F{monto}]]></textFieldExpression>
			</textField>
			<textField pattern="#,##0">
				<reportElement x="370" y="5" width="52" height="10" uuid="e8878d74-cb11-41f8-ad21-02907c1c2811">
					<printWhenExpression><![CDATA[$F{iva}.equals( "0.00")]]></printWhenExpression>
				</reportElement>
				<textElement textAlignment="Right">
					<font fontName="Lucida Sans" size="7"/>
				</textElement>
				<textFieldExpression><![CDATA[$F{monto}]]></textFieldExpression>
			</textField>
			<textField pattern="#,##0">
				<reportElement x="442" y="5" width="58" height="10" uuid="5091c69e-8d0f-4347-b713-b06fa18d635b">
					<printWhenExpression><![CDATA[$F{iva}.equals("5.00")]]></printWhenExpression>
				</reportElement>
				<textElement textAlignment="Right">
					<font fontName="Lucida Sans" size="7"/>
				</textElement>
				<textFieldExpression><![CDATA[$F{monto}]]></textFieldExpression>
			</textField>
		</band>
	</detail>
	<pageFooter>
		<band height="71">
			<textField pattern="#,##0">
				<reportElement x="87" y="44" width="73" height="10" uuid="f036c02f-37da-40fe-a112-9e3c5200149f"/>
				<textElement textAlignment="Right">
					<font fontName="Lucida Sans" size="8"/>
				</textElement>
				<textFieldExpression><![CDATA[$F{totaliva5}]]></textFieldExpression>
			</textField>
			<textField pattern="#,##0">
				<reportElement x="228" y="43" width="73" height="10" uuid="07cd45ee-9afd-4338-988d-d563e1776552"/>
				<textElement textAlignment="Right">
					<font fontName="Lucida Sans" size="8"/>
				</textElement>
				<textFieldExpression><![CDATA[$F{totaliva10}]]></textFieldExpression>
			</textField>
			<textField>
				<reportElement x="82" y="26" width="417" height="10" uuid="1ca48691-6d62-489e-af00-ccad6911e00c"/>
				<textElement>
					<font fontName="Verdana" size="8"/>
				</textElement>
				<textFieldExpression><![CDATA[$P{Letra}+"-"]]></textFieldExpression>
			</textField>
			<textField evaluationTime="Page" pattern="#,##0">
				<reportElement x="444" y="10" width="54" height="10" uuid="88029bdd-d3e1-43e1-a76c-fa8716891709"/>
				<textElement textAlignment="Right">
					<font fontName="Lucida Sans" size="8"/>
				</textElement>
				<textFieldExpression><![CDATA[$F{gravadas5}]]></textFieldExpression>
			</textField>
			<textField evaluationTime="Page" pattern="#,##0">
				<reportElement x="368" y="10" width="54" height="10" uuid="a9446e99-ccb3-415a-a1f0-78a4011758c3"/>
				<textElement textAlignment="Right">
					<font fontName="Lucida Sans" size="8"/>
				</textElement>
				<textFieldExpression><![CDATA[$F{exentas}]]></textFieldExpression>
			</textField>
			<textField pattern="#,##0">
				<reportElement x="340" y="42" width="74" height="10" uuid="088ace2a-2edd-4355-88eb-030a9248c06a"/>
				<textElement textAlignment="Right">
					<font fontName="Lucida Sans" size="8"/>
				</textElement>
				<textFieldExpression><![CDATA[$F{totaliva5}.add($F{totaliva10})]]></textFieldExpression>
			</textField>
			<textField pattern="#,##0">
				<reportElement x="508" y="10" width="60" height="10" uuid="b9c661ec-d264-490e-8996-e6bf685dc2b6"/>
				<textElement textAlignment="Right">
					<font fontName="Lucida Sans" size="8"/>
				</textElement>
				<textFieldExpression><![CDATA[$F{gravadas10}]]></textFieldExpression>
			</textField>
			<textField pattern="#,##0">
				<reportElement x="507" y="27" width="60" height="10" uuid="1b69ec69-2a4f-443f-aac7-ec01966e7bb4"/>
				<textElement textAlignment="Right">
					<font fontName="Lucida Sans" size="8"/>
				</textElement>
				<textFieldExpression><![CDATA[$F{totalneto}]]></textFieldExpression>
			</textField>
		</band>
	</pageFooter>
</jasperReport>
