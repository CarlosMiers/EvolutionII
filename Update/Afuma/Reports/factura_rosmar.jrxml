<?xml version="1.0" encoding="UTF-8"?>
<jasperReport xmlns="http://jasperreports.sourceforge.net/jasperreports" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:schemaLocation="http://jasperreports.sourceforge.net/jasperreports http://jasperreports.sourceforge.net/xsd/jasperreport.xsd" name="factura_rosmar" printOrder="Horizontal" pageWidth="615" pageHeight="861" columnWidth="615" leftMargin="0" rightMargin="0" topMargin="0" bottomMargin="0" uuid="15724193-b574-49f8-865b-f4df501516b8">
	<property name="ireport.zoom" value="1.5"/>
	<property name="ireport.x" value="292"/>
	<property name="ireport.y" value="381"/>
	<parameter name="SUBREPORT_DIR" class="java.lang.String" isForPrompting="false">
		<defaultValueExpression><![CDATA["C:\\Sistemas\\EvolutionII\\EvolutionII\\src\\Reports\\"]]></defaultValueExpression>
	</parameter>
	<parameter name="cNombreEmpresa" class="java.lang.String"/>
	<parameter name="cReferencia" class="java.lang.String"/>
	<parameter name="Letra" class="java.lang.String"/>
	<queryString>
		<![CDATA[SELECT cabecera_ventas.formatofactura,cabecera_ventas.creferencia,cabecera_ventas.factura,cabecera_ventas.fecha AS dia,YEAR(fecha) AS anual,
cabecera_ventas.vencimiento,cabecera_ventas.cliente,clientes.nombre,clientes.ruc,
IFNULL(ROUND((`cabecera_ventas`.`exentas` * `cabecera_ventas`.`cotizacion`),0),0) AS `totalexentas`,
IFNULL(ROUND(((`cabecera_ventas`.`gravadas10` * `cabecera_ventas`.`cotizacion`) / 11),0),0) AS `totaliva10`,
IFNULL(ROUND(((`cabecera_ventas`.`gravadas5` * `cabecera_ventas`.`cotizacion`) / 21),0),0) AS `totaliva5`,
cabecera_ventas.comprobante,cabecera_ventas.moneda,cabecera_ventas.gravadas10,
cabecera_ventas.exentas,cabecera_ventas.gravadas5,cabecera_ventas.totalneto,
sucursales.direccion as direccionsucursal,
clientes.direccion as direccioncliente,clientes.telefono,
TIMESTAMPDIFF(DAY, fecha,vencimiento) AS diasplazo,
CASE MONTH(cabecera_ventas.fecha)
  WHEN 1 THEN 'ENERO'
  WHEN 2 THEN 'FEBRERO'
  WHEN 3 THEN 'MARZO'
  WHEN 4 THEN 'ABRIL'
  WHEN 5 THEN 'MAYO'
  WHEN 6 THEN 'JUNIO'
  WHEN 7 THEN 'JULIO'
  WHEN 8 THEN 'AGOSTO'
  WHEN 9 THEN 'SETIEMBRE'
  WHEN 10 THEN 'OCTUBRE'
  WHEN 11 THEN 'NOVIEMBRE'
  WHEN 12 THEN 'DICIEMBRE'
END AS nombremes
FROM cabecera_ventas
LEFT JOIN clientes
ON clientes.codigo=cabecera_ventas.cliente
LEFT JOIN sucursales
ON sucursales.codigo=cabecera_ventas.sucursal
WHERE cabecera_ventas.creferencia=$P{cReferencia}]]>
	</queryString>
	<field name="formatofactura" class="java.lang.String">
		<fieldDescription><![CDATA[]]></fieldDescription>
	</field>
	<field name="creferencia" class="java.lang.String">
		<fieldDescription><![CDATA[]]></fieldDescription>
	</field>
	<field name="factura" class="java.math.BigDecimal">
		<fieldDescription><![CDATA[]]></fieldDescription>
	</field>
	<field name="dia" class="java.sql.Date"/>
	<field name="anual" class="java.lang.Long"/>
	<field name="vencimiento" class="java.sql.Date">
		<fieldDescription><![CDATA[]]></fieldDescription>
	</field>
	<field name="cliente" class="java.lang.Integer">
		<fieldDescription><![CDATA[]]></fieldDescription>
	</field>
	<field name="nombre" class="java.lang.String">
		<fieldDescription><![CDATA[]]></fieldDescription>
	</field>
	<field name="ruc" class="java.lang.String">
		<fieldDescription><![CDATA[]]></fieldDescription>
	</field>
	<field name="totalexentas" class="java.math.BigDecimal">
		<fieldDescription><![CDATA[]]></fieldDescription>
	</field>
	<field name="totaliva10" class="java.math.BigDecimal">
		<fieldDescription><![CDATA[]]></fieldDescription>
	</field>
	<field name="totaliva5" class="java.math.BigDecimal">
		<fieldDescription><![CDATA[]]></fieldDescription>
	</field>
	<field name="comprobante" class="java.lang.Integer">
		<fieldDescription><![CDATA[]]></fieldDescription>
	</field>
	<field name="moneda" class="java.lang.Integer">
		<fieldDescription><![CDATA[]]></fieldDescription>
	</field>
	<field name="gravadas10" class="java.math.BigDecimal">
		<fieldDescription><![CDATA[]]></fieldDescription>
	</field>
	<field name="exentas" class="java.math.BigDecimal">
		<fieldDescription><![CDATA[]]></fieldDescription>
	</field>
	<field name="gravadas5" class="java.math.BigDecimal">
		<fieldDescription><![CDATA[]]></fieldDescription>
	</field>
	<field name="totalneto" class="java.math.BigDecimal">
		<fieldDescription><![CDATA[]]></fieldDescription>
	</field>
	<field name="direccionsucursal" class="java.lang.String"/>
	<field name="direccioncliente" class="java.lang.String"/>
	<field name="telefono" class="java.lang.String">
		<fieldDescription><![CDATA[]]></fieldDescription>
	</field>
	<field name="diasplazo" class="java.lang.Long"/>
	<field name="nombremes" class="java.lang.String"/>
	<variable name="totaliva5_1" class="java.math.BigDecimal" resetType="Page" calculation="Sum">
		<variableExpression><![CDATA[$F{totaliva5}]]></variableExpression>
	</variable>
	<variable name="totalexentas_1" class="java.math.BigDecimal" resetType="Page" calculation="Sum">
		<variableExpression><![CDATA[$F{totalexentas}]]></variableExpression>
	</variable>
	<pageHeader>
		<band height="757" splitType="Stretch">
			<textField>
				<reportElement x="86" y="125" width="61" height="11" uuid="f06fa5c0-e7ab-4261-b10a-d1fb11ab5986"/>
				<textElement>
					<font fontName="SansSerif" size="8"/>
				</textElement>
				<textFieldExpression><![CDATA[$F{ruc}]]></textFieldExpression>
			</textField>
			<textField>
				<reportElement x="108" y="137" width="324" height="11" uuid="b8946176-5ab3-4c7a-8266-f2e4a2204dcb"/>
				<textElement>
					<font fontName="SansSerif" size="8"/>
				</textElement>
				<textFieldExpression><![CDATA[$F{nombre}]]></textFieldExpression>
			</textField>
			<textField isBlankWhenNull="true">
				<reportElement x="455" y="113" width="18" height="11" uuid="058b4115-2453-44d7-9d82-302e1f553779"/>
				<textElement textAlignment="Right">
					<font fontName="SansSerif" size="8" isBold="true"/>
				</textElement>
				<textFieldExpression><![CDATA[( $F{comprobante}.equals( new Integer(1)) ? "X" : "" )]]></textFieldExpression>
			</textField>
			<textField isBlankWhenNull="true">
				<reportElement x="512" y="112" width="13" height="11" uuid="d18cfa14-be6b-4287-bb48-2b1bb5ea4179"/>
				<textElement textAlignment="Right">
					<font fontName="SansSerif" size="8" isBold="true"/>
				</textElement>
				<textFieldExpression><![CDATA[( $F{comprobante}.equals( new Integer(5)) ? "X" : "" )]]></textFieldExpression>
			</textField>
			<textField pattern="dd/MM/yyyy">
				<reportElement x="88" y="113" width="70" height="11" uuid="0dbbd44f-20db-4dd2-b54e-bef14548a86f"/>
				<textElement>
					<font fontName="SansSerif" size="8"/>
				</textElement>
				<textFieldExpression><![CDATA[$F{dia}]]></textFieldExpression>
			</textField>
			<textField>
				<reportElement x="89" y="149" width="343" height="11" uuid="c9b9dc2b-04c9-4fc9-81ec-5b3c3eb33f3b"/>
				<textElement>
					<font fontName="SansSerif" size="8"/>
				</textElement>
				<textFieldExpression><![CDATA[$F{direccioncliente}]]></textFieldExpression>
			</textField>
			<subreport>
				<reportElement x="12" y="191" width="603" height="307" uuid="43faa1fb-7e3e-4136-95d7-200e316a063c"/>
				<subreportParameter name="cReferencia">
					<subreportParameterExpression><![CDATA[$P{cReferencia}]]></subreportParameterExpression>
				</subreportParameter>
				<connectionExpression><![CDATA[$P{REPORT_CONNECTION}]]></connectionExpression>
				<subreportExpression><![CDATA[$P{SUBREPORT_DIR} + "detalle_factura_rosmar.jasper"]]></subreportExpression>
			</subreport>
			<textField pattern="#,##0">
				<reportElement x="115" y="554" width="73" height="11" uuid="07cd45ee-9afd-4338-988d-d563e1776552"/>
				<textElement textAlignment="Right">
					<font fontName="SansSerif" size="8"/>
				</textElement>
				<textFieldExpression><![CDATA[$F{totaliva10}]]></textFieldExpression>
			</textField>
			<textField>
				<reportElement x="86" y="534" width="397" height="11" uuid="1ca48691-6d62-489e-af00-ccad6911e00c"/>
				<textElement>
					<font fontName="SansSerif" size="8"/>
				</textElement>
				<textFieldExpression><![CDATA[$P{Letra}+"-"]]></textFieldExpression>
			</textField>
			<textField evaluationTime="Page" pattern="#,##0">
				<reportElement x="417" y="505" width="54" height="11" uuid="a9446e99-ccb3-415a-a1f0-78a4011758c3"/>
				<textElement textAlignment="Right">
					<font fontName="SansSerif" size="8"/>
				</textElement>
				<textFieldExpression><![CDATA[$F{exentas}]]></textFieldExpression>
			</textField>
			<textField pattern="#,##0">
				<reportElement x="387" y="552" width="74" height="11" uuid="088ace2a-2edd-4355-88eb-030a9248c06a"/>
				<textElement textAlignment="Right">
					<font fontName="SansSerif" size="8"/>
				</textElement>
				<textFieldExpression><![CDATA[$F{totaliva5}.add($F{totaliva10})]]></textFieldExpression>
			</textField>
			<textField pattern="#,##0">
				<reportElement x="488" y="505" width="54" height="11" uuid="b9c661ec-d264-490e-8996-e6bf685dc2b6"/>
				<textElement textAlignment="Right">
					<font fontName="SansSerif" size="8"/>
				</textElement>
				<textFieldExpression><![CDATA[$F{gravadas10}]]></textFieldExpression>
			</textField>
			<textField pattern="#,##0">
				<reportElement x="485" y="533" width="60" height="11" uuid="1b69ec69-2a4f-443f-aac7-ec01966e7bb4"/>
				<textElement textAlignment="Right">
					<font fontName="SansSerif" size="8"/>
				</textElement>
				<textFieldExpression><![CDATA[$F{totalneto}]]></textFieldExpression>
			</textField>
			<textField pattern="dd/MM/yyyy">
				<reportElement x="117" y="590" width="61" height="11" uuid="d4723bd6-3d59-475f-8411-5c11f055cc79"/>
				<textElement>
					<font fontName="SansSerif" size="8"/>
				</textElement>
				<textFieldExpression><![CDATA[$F{dia}]]></textFieldExpression>
			</textField>
			<textField pattern="dd/MM/yyyy">
				<reportElement x="117" y="601" width="61" height="11" uuid="d611f188-f6a5-4488-b3c9-e1c85916753a"/>
				<textElement>
					<font fontName="SansSerif" size="8"/>
				</textElement>
				<textFieldExpression><![CDATA[$F{dia}]]></textFieldExpression>
			</textField>
			<textField>
				<reportElement x="118" y="612" width="343" height="11" uuid="f74f5480-80b2-4b3e-a45d-a93948324642"/>
				<textElement>
					<font fontName="SansSerif" size="8"/>
				</textElement>
				<textFieldExpression><![CDATA[$F{direccionsucursal}]]></textFieldExpression>
			</textField>
			<textField>
				<reportElement x="118" y="635" width="343" height="11" uuid="3da36108-a03a-447c-b87e-781623ecb1b7"/>
				<textElement>
					<font fontName="SansSerif" size="8"/>
				</textElement>
				<textFieldExpression><![CDATA[$F{direccioncliente}]]></textFieldExpression>
			</textField>
			<staticText>
				<reportElement x="116" y="623" width="100" height="11" uuid="ad945a45-559a-4c07-bb04-5536c195c926"/>
				<textElement>
					<font fontName="SansSerif" size="8"/>
				</textElement>
				<text><![CDATA[FERNANDO DE LA MORA]]></text>
			</staticText>
			<textField pattern="dd/MM/yyyy">
				<reportElement x="439" y="150" width="89" height="11" uuid="a53bad42-61e8-4c9f-b470-66aa3da9bf84">
					<printWhenExpression><![CDATA[$F{diasplazo}>0]]></printWhenExpression>
				</reportElement>
				<textElement>
					<font fontName="SansSerif" size="8"/>
				</textElement>
				<textFieldExpression><![CDATA["PLAZO EN DIAS: "+$F{diasplazo}]]></textFieldExpression>
			</textField>
			<textField>
				<reportElement x="265" y="110" width="90" height="11" uuid="99a36c63-2ed6-48cd-b53b-7a22ebeb4904"/>
				<textElement>
					<font fontName="SansSerif" size="8"/>
				</textElement>
				<textFieldExpression><![CDATA[$F{formatofactura}]]></textFieldExpression>
			</textField>
			<textField pattern="###0" isBlankWhenNull="true">
				<reportElement x="471" y="137" width="89" height="11" uuid="22a313ae-e399-4895-be6e-458d189d1925">
					<printWhenExpression><![CDATA[$F{diasplazo}>0]]></printWhenExpression>
				</reportElement>
				<textElement>
					<font fontName="SansSerif" size="8"/>
				</textElement>
				<textFieldExpression><![CDATA[$F{telefono}]]></textFieldExpression>
			</textField>
		</band>
	</pageHeader>
	<pageFooter>
		<band height="18"/>
	</pageFooter>
</jasperReport>
