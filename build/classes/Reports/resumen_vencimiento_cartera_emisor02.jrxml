<?xml version="1.0" encoding="UTF-8"?>
<jasperReport xmlns="http://jasperreports.sourceforge.net/jasperreports" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:schemaLocation="http://jasperreports.sourceforge.net/jasperreports http://jasperreports.sourceforge.net/xsd/jasperreport.xsd" name="resumen_vencimiento_cartera_emisor02" pageWidth="595" pageHeight="842" columnWidth="555" leftMargin="20" rightMargin="20" topMargin="20" bottomMargin="20" uuid="6034848f-e095-4fb9-a25c-057dfebd9eaf">
	<property name="ireport.zoom" value="1.5"/>
	<property name="ireport.x" value="0"/>
	<property name="ireport.y" value="0"/>
	<parameter name="cNombreEmpresa" class="java.lang.String"/>
	<parameter name="cEmisor" class="java.lang.String"/>
	<parameter name="cMoneda" class="java.lang.String"/>
	<parameter name="FechaInicio" class="java.util.Date"/>
	<parameter name="FechaFinal" class="java.util.Date"/>
	<parameter name="nAsesor" class="java.lang.Integer"/>
	<parameter name="nestado" class="java.lang.Integer"/>
	<queryString>
		<![CDATA[SELECT cartera_clientes.numero,negociado,
cartera_clientes.fecha,cartera_clientes.fechacierre,
cartera_clientes.fechaemision,
cupones.fechavencimiento AS vencimiento,
comprador,asesorcompra,
clientes.nombre AS nombrecliente,
clientes.comitente,vendedores.nombre AS nombreasesor,
cartera_clientes.operacion,tipooperacion,
cartera_clientes.mercado,cartera_clientes.moneda,
monedas.nombre AS nombremoneda,
emisor,emisores.nombre AS nombreemisor,
titulo,titulos.nombre AS nombretitulo,
titulos.nomalias AS aliastitulo,
valor_nominal,cantidad,precio,valorfuturo AS valor_inversion,
cartera_clientes.tasa,cupones.plazocupon AS plazo,tipoplazo,numerobolsa,
cartera_clientes.bancopago,cartera_clientes.cuentapago,
bancos_plaza.nombre AS nombrebanco,
cartera_clientes.periodopago,2 AS tipodocumento,
'CP' AS nombredocumento, cupones.ncupon,
cupones.ncantidad
FROM cartera_clientes
LEFT JOIN monedas
ON cartera_clientes.moneda=monedas.codigo
LEFT JOIN emisores
 ON cartera_clientes.emisor=emisores.codigo
LEFT JOIN titulos
ON cartera_clientes.titulo=titulos.codigo
LEFT JOIN clientes
ON cartera_clientes.comprador=clientes.codigo
LEFT JOIN vendedores
ON cartera_clientes.asesorcompra=vendedores.codigo
LEFT JOIN bancos_plaza
ON cartera_clientes.bancopago=bancos_plaza.codigo
LEFT JOIN cupones
ON cartera_clientes.creferencia=cupones.idprecierre
 WHERE IF($P{cEmisor}<>0,cartera_clientes.emisor=$P{cEmisor},TRUE)
 AND IF($P{cMoneda}<>0,cartera_clientes.moneda=$P{cMoneda},TRUE)
 AND IF($P{nAsesor}<>0,clientes.asesor=$P{nAsesor},TRUE)
 AND cupones.fechavencimiento BETWEEN $P{FechaInicio}
 AND  $P{FechaFinal} AND cartera_clientes.operacion=1
  AND IF($P{nestado}<>0,cupones.estado=$P{nestado},TRUE)
 ORDER BY cartera_clientes.emisor,cartera_clientes.moneda,
clientes.comitente,cupones.fechavencimiento]]>
	</queryString>
	<field name="numero" class="java.lang.Integer">
		<fieldDescription><![CDATA[]]></fieldDescription>
	</field>
	<field name="negociado" class="java.lang.Integer">
		<fieldDescription><![CDATA[]]></fieldDescription>
	</field>
	<field name="fecha" class="java.sql.Date">
		<fieldDescription><![CDATA[]]></fieldDescription>
	</field>
	<field name="fechacierre" class="java.sql.Date">
		<fieldDescription><![CDATA[]]></fieldDescription>
	</field>
	<field name="fechaemision" class="java.sql.Date">
		<fieldDescription><![CDATA[]]></fieldDescription>
	</field>
	<field name="vencimiento" class="java.sql.Date"/>
	<field name="comprador" class="java.lang.Integer">
		<fieldDescription><![CDATA[]]></fieldDescription>
	</field>
	<field name="asesorcompra" class="java.lang.Integer">
		<fieldDescription><![CDATA[]]></fieldDescription>
	</field>
	<field name="nombrecliente" class="java.lang.String"/>
	<field name="comitente" class="java.lang.Integer">
		<fieldDescription><![CDATA[]]></fieldDescription>
	</field>
	<field name="nombreasesor" class="java.lang.String"/>
	<field name="operacion" class="java.lang.Integer">
		<fieldDescription><![CDATA[Indica si la operación es de Renta Fija-Renta Variable u Otro tipo de Título]]></fieldDescription>
	</field>
	<field name="tipooperacion" class="java.lang.Integer">
		<fieldDescription><![CDATA[]]></fieldDescription>
	</field>
	<field name="mercado" class="java.lang.Integer">
		<fieldDescription><![CDATA[]]></fieldDescription>
	</field>
	<field name="moneda" class="java.lang.Integer">
		<fieldDescription><![CDATA[]]></fieldDescription>
	</field>
	<field name="nombremoneda" class="java.lang.String"/>
	<field name="emisor" class="java.lang.Integer">
		<fieldDescription><![CDATA[]]></fieldDescription>
	</field>
	<field name="nombreemisor" class="java.lang.String"/>
	<field name="titulo" class="java.lang.Integer">
		<fieldDescription><![CDATA[]]></fieldDescription>
	</field>
	<field name="nombretitulo" class="java.lang.String"/>
	<field name="aliastitulo" class="java.lang.String"/>
	<field name="valor_nominal" class="java.math.BigDecimal">
		<fieldDescription><![CDATA[]]></fieldDescription>
	</field>
	<field name="cantidad" class="java.math.BigDecimal">
		<fieldDescription><![CDATA[]]></fieldDescription>
	</field>
	<field name="precio" class="java.math.BigDecimal">
		<fieldDescription><![CDATA[]]></fieldDescription>
	</field>
	<field name="valor_inversion" class="java.math.BigDecimal"/>
	<field name="tasa" class="java.math.BigDecimal">
		<fieldDescription><![CDATA[]]></fieldDescription>
	</field>
	<field name="plazo" class="java.lang.Integer"/>
	<field name="tipoplazo" class="java.lang.Integer">
		<fieldDescription><![CDATA[]]></fieldDescription>
	</field>
	<field name="numerobolsa" class="java.lang.String">
		<fieldDescription><![CDATA[]]></fieldDescription>
	</field>
	<field name="bancopago" class="java.lang.Integer">
		<fieldDescription><![CDATA[]]></fieldDescription>
	</field>
	<field name="cuentapago" class="java.lang.String">
		<fieldDescription><![CDATA[]]></fieldDescription>
	</field>
	<field name="nombrebanco" class="java.lang.String"/>
	<field name="periodopago" class="java.lang.Integer">
		<fieldDescription><![CDATA[]]></fieldDescription>
	</field>
	<field name="tipodocumento" class="java.lang.Long"/>
	<field name="nombredocumento" class="java.lang.String"/>
	<field name="ncupon" class="java.lang.Integer">
		<fieldDescription><![CDATA[]]></fieldDescription>
	</field>
	<field name="ncantidad" class="java.lang.Integer">
		<fieldDescription><![CDATA[]]></fieldDescription>
	</field>
	<variable name="valor_nominal_1" class="java.math.BigDecimal" resetType="Group" resetGroup="moneda" calculation="Sum">
		<variableExpression><![CDATA[$F{valor_inversion}]]></variableExpression>
	</variable>
	<variable name="valor_nominal_2" class="java.math.BigDecimal" resetType="Group" resetGroup="emisor" calculation="Sum">
		<variableExpression><![CDATA[$F{valor_inversion}]]></variableExpression>
	</variable>
	<variable name="valor_nominal_3" class="java.math.BigDecimal" calculation="Sum">
		<variableExpression><![CDATA[$F{valor_inversion}]]></variableExpression>
	</variable>
	<group name="emisor" isReprintHeaderOnEachPage="true">
		<groupExpression><![CDATA[$F{emisor}]]></groupExpression>
		<groupHeader>
			<band height="21">
				<textField>
					<reportElement x="10" y="6" width="392" height="12" uuid="6c29d597-45a5-4290-979e-5effc8426872"/>
					<textElement>
						<font fontName="Arial" size="8" isBold="true"/>
					</textElement>
					<textFieldExpression><![CDATA["Entidad Emisora "+$F{nombreemisor}]]></textFieldExpression>
				</textField>
			</band>
		</groupHeader>
		<groupFooter>
			<band height="6"/>
		</groupFooter>
	</group>
	<group name="moneda" isReprintHeaderOnEachPage="true">
		<groupExpression><![CDATA[$F{moneda}]]></groupExpression>
		<groupHeader>
			<band height="56">
				<rectangle>
					<reportElement x="0" y="24" width="555" height="29" uuid="593ee49c-100f-4151-ab6f-5eebdf6fde83"/>
				</rectangle>
				<staticText>
					<reportElement x="103" y="43" width="99" height="10" uuid="8ae59c5b-8318-481f-b795-5de02d5521f4"/>
					<textElement textAlignment="Center">
						<font fontName="Arial" size="8"/>
					</textElement>
					<text><![CDATA[Nombre/Denominación]]></text>
				</staticText>
				<staticText>
					<reportElement x="342" y="43" width="18" height="10" uuid="280ca661-f12e-4c05-ba57-c41482c529dc"/>
					<textElement textAlignment="Center">
						<font fontName="Arial" size="8"/>
					</textElement>
					<text><![CDATA[N°]]></text>
				</staticText>
				<staticText>
					<reportElement x="371" y="43" width="49" height="10" uuid="48cda162-fc32-4c47-a48e-499facd40d64"/>
					<textElement textAlignment="Center">
						<font fontName="Arial" size="8"/>
					</textElement>
					<text><![CDATA[Serie]]></text>
				</staticText>
				<staticText>
					<reportElement x="432" y="43" width="113" height="10" uuid="2d5047d3-3e5c-48eb-bee3-e89480546d86"/>
					<textElement textAlignment="Center">
						<font fontName="Arial" size="8"/>
					</textElement>
					<text><![CDATA[Cuenta de Pago]]></text>
				</staticText>
				<staticText>
					<reportElement x="46" y="43" width="45" height="10" uuid="5975ae94-5cfa-421a-b266-d98dca4f35af"/>
					<textElement textAlignment="Center">
						<font fontName="Arial" size="8"/>
					</textElement>
					<text><![CDATA[Cta. Com.]]></text>
				</staticText>
				<staticText>
					<reportElement x="7" y="43" width="30" height="10" uuid="97c5e6b3-2ef0-4de4-95b9-7a2a5ed5c1ae"/>
					<textElement textAlignment="Center">
						<font fontName="Arial" size="8"/>
					</textElement>
					<text><![CDATA[Vence]]></text>
				</staticText>
				<staticText>
					<reportElement x="239" y="43" width="19" height="10" uuid="e70f7a43-98ab-42cc-9293-2a3646710dea"/>
					<textElement textAlignment="Center">
						<font fontName="Arial" size="8"/>
					</textElement>
					<text><![CDATA[Tipo]]></text>
				</staticText>
				<staticText>
					<reportElement x="285" y="43" width="49" height="10" uuid="8d241d58-ed9f-4cf6-936b-5b34b7432b62"/>
					<textElement textAlignment="Center">
						<font fontName="Arial" size="8"/>
					</textElement>
					<text><![CDATA[Importe]]></text>
				</staticText>
				<staticText>
					<reportElement x="48" y="27" width="177" height="10" uuid="c09f7834-75b4-4524-8800-22aa6a3c10fa"/>
					<textElement textAlignment="Center">
						<font fontName="Arial" size="8" isBold="true"/>
					</textElement>
					<text><![CDATA[--------------- Datos del Cliente --------------- ]]></text>
				</staticText>
				<textField>
					<reportElement x="11" y="8" width="215" height="12" uuid="531bf0fd-dc73-4e01-93d7-4765baaf0df8"/>
					<textElement>
						<font fontName="Arial" size="8" isBold="true"/>
					</textElement>
					<textFieldExpression><![CDATA["Vencimientos en : "+$F{nombremoneda}]]></textFieldExpression>
				</textField>
			</band>
		</groupHeader>
		<groupFooter>
			<band height="22">
				<rectangle>
					<reportElement x="0" y="2" width="555" height="18" uuid="d416c76f-bb9b-4f1f-a29d-74093ab88d80"/>
				</rectangle>
				<textField evaluationTime="Group" evaluationGroup="moneda" pattern="#,##0.00">
					<reportElement x="222" y="6" width="112" height="10" uuid="09ffdb0e-371c-4730-808c-f3cf9d29d21d"/>
					<textElement textAlignment="Right">
						<font fontName="Arial" size="8" isBold="true"/>
					</textElement>
					<textFieldExpression><![CDATA[$V{valor_nominal_1}]]></textFieldExpression>
				</textField>
				<textField>
					<reportElement x="19" y="6" width="185" height="12" uuid="b4deeefe-4fb3-48f5-9fff-f808dc6b6b1d"/>
					<textElement>
						<font fontName="Arial" size="8" isBold="true"/>
					</textElement>
					<textFieldExpression><![CDATA["Total Vencimiento en : "+$F{nombremoneda}]]></textFieldExpression>
				</textField>
			</band>
		</groupFooter>
	</group>
	<background>
		<band splitType="Stretch"/>
	</background>
	<pageHeader>
		<band height="57">
			<textField>
				<reportElement x="9" y="8" width="296" height="15" uuid="00a6fb42-4341-4a40-995c-ba57374b48d7"/>
				<textElement>
					<font fontName="Arial" isBold="true"/>
				</textElement>
				<textFieldExpression><![CDATA[$P{cNombreEmpresa}]]></textFieldExpression>
			</textField>
			<staticText>
				<reportElement x="9" y="25" width="305" height="14" uuid="1c2fec0f-e19d-4a5b-8afd-44fa5760de93"/>
				<textElement textAlignment="Justified">
					<font fontName="Arial" size="12" isBold="true"/>
				</textElement>
				<text><![CDATA[Resumen de Vencimiento de Carteras por Emisor]]></text>
			</staticText>
			<staticText>
				<reportElement x="9" y="42" width="129" height="12" uuid="cbce6031-83a2-460c-aa54-51cc618e9981"/>
				<textElement textAlignment="Center">
					<font fontName="Arial" size="8" isBold="true"/>
				</textElement>
				<text><![CDATA[Período de vencimiento Desde el]]></text>
			</staticText>
			<textField pattern="dd/MM/yyyy">
				<reportElement x="147" y="42" width="50" height="12" uuid="a59f5a64-bb09-40aa-a7db-ae7e4f56eae5"/>
				<textElement>
					<font fontName="Arial" size="8"/>
				</textElement>
				<textFieldExpression><![CDATA[$P{FechaInicio}]]></textFieldExpression>
			</textField>
			<textField pattern="dd/MM/yyyy">
				<reportElement x="247" y="42" width="50" height="12" uuid="4ac37c3b-ab54-45f3-af6b-1fdfc37ee8ee"/>
				<textElement>
					<font fontName="Arial" size="8"/>
				</textElement>
				<textFieldExpression><![CDATA[$P{FechaFinal}]]></textFieldExpression>
			</textField>
			<staticText>
				<reportElement x="204" y="42" width="37" height="12" uuid="43b8a08b-752a-4acf-9870-24a34492b872"/>
				<textElement textAlignment="Right">
					<font fontName="Arial" size="8" isBold="true"/>
				</textElement>
				<text><![CDATA[Hasta el ]]></text>
			</staticText>
			<textField>
				<reportElement x="426" y="8" width="120" height="15" uuid="2a194ed6-cc51-4bd5-b4d1-a92bc9170c65"/>
				<textElement>
					<font fontName="Arial" size="8"/>
				</textElement>
				<textFieldExpression><![CDATA["Página "+$V{PAGE_NUMBER}+" de " + $V{PAGE_NUMBER}]]></textFieldExpression>
			</textField>
			<textField pattern="d/M/yyyy">
				<reportElement x="463" y="27" width="85" height="12" uuid="09ab4ed9-4dc1-4fac-a16f-ecdb817dd109"/>
				<textElement>
					<font fontName="Arial" size="8"/>
				</textElement>
				<textFieldExpression><![CDATA[new java.util.Date()]]></textFieldExpression>
			</textField>
			<staticText>
				<reportElement x="428" y="28" width="31" height="11" uuid="516dfe62-33a3-46c5-8c23-47dec8ff33c3"/>
				<textElement>
					<font fontName="Arial" size="8" isUnderline="false" isStrikeThrough="false"/>
				</textElement>
				<text><![CDATA[Fecha :]]></text>
			</staticText>
		</band>
	</pageHeader>
	<detail>
		<band height="14" splitType="Stretch">
			<textField pattern="#,##0.00">
				<reportElement x="264" y="2" width="70" height="10" uuid="a5a628bc-2a7f-4a7b-bbfb-736b51b4b46c"/>
				<textElement textAlignment="Right">
					<font fontName="Arial" size="8"/>
				</textElement>
				<textFieldExpression><![CDATA[$F{valor_inversion}]]></textFieldExpression>
			</textField>
			<textField pattern="dd/MM/yy">
				<reportElement x="1" y="2" width="36" height="10" uuid="e95e5c3e-8ac9-48b2-8f3b-b9f182898a53"/>
				<textElement textAlignment="Center">
					<font fontName="Arial" size="8"/>
				</textElement>
				<textFieldExpression><![CDATA[$F{vencimiento}]]></textFieldExpression>
			</textField>
			<textField pattern="#,##0">
				<reportElement x="98" y="2" width="135" height="10" uuid="6e4afdb5-6273-4766-9b53-6e7129470f8c"/>
				<textElement>
					<font fontName="Arial" size="8"/>
				</textElement>
				<textFieldExpression><![CDATA[$F{nombrecliente}]]></textFieldExpression>
			</textField>
			<textField pattern="#,##0">
				<reportElement x="239" y="2" width="19" height="10" uuid="9fa4c439-f794-430f-9557-c860f16b281b"/>
				<textElement>
					<font fontName="Arial" size="8"/>
				</textElement>
				<textFieldExpression><![CDATA[$F{nombredocumento}]]></textFieldExpression>
			</textField>
			<textField pattern="#,##0">
				<reportElement x="38" y="2" width="54" height="10" uuid="c5cd0de9-7214-4c97-9fc6-800f4702efbd"/>
				<textElement textAlignment="Right">
					<font fontName="Arial" size="8"/>
				</textElement>
				<textFieldExpression><![CDATA[$F{comprador}+"  "+$F{comitente}]]></textFieldExpression>
			</textField>
			<textField pattern="#,##0">
				<reportElement x="337" y="2" width="24" height="11" uuid="3ddadb29-49eb-4818-9520-78a566788dac"/>
				<textElement textAlignment="Right">
					<font fontName="Arial" size="6"/>
				</textElement>
				<textFieldExpression><![CDATA[$F{ncupon}+"/"+$F{ncantidad}]]></textFieldExpression>
			</textField>
			<textField pattern="#,##0">
				<reportElement x="367" y="2" width="60" height="10" uuid="46cb153b-8f75-4f0f-94cc-d5875aef0b34"/>
				<textElement>
					<font fontName="Arial" size="8"/>
				</textElement>
				<textFieldExpression><![CDATA[$F{aliastitulo}]]></textFieldExpression>
			</textField>
			<textField pattern="#,##0" isBlankWhenNull="true">
				<reportElement x="432" y="2" width="123" height="10" uuid="3a6c8ae9-e351-4aec-bab9-8a599594d8b0"/>
				<textElement>
					<font fontName="Arial" size="8"/>
				</textElement>
				<textFieldExpression><![CDATA[$F{nombrebanco}.trim()+"   "+$F{cuentapago}]]></textFieldExpression>
			</textField>
		</band>
	</detail>
	<columnFooter>
		<band splitType="Stretch"/>
	</columnFooter>
	<pageFooter>
		<band splitType="Stretch"/>
	</pageFooter>
	<summary>
		<band height="49">
			<staticText>
				<reportElement x="3" y="3" width="92" height="10" uuid="0eb651ea-84ae-4cf3-97f0-899f96a18a82"/>
				<textElement textAlignment="Center">
					<font fontName="Arial" size="8" isBold="true"/>
				</textElement>
				<text><![CDATA[*** Fin del Informe***]]></text>
			</staticText>
		</band>
	</summary>
</jasperReport>
