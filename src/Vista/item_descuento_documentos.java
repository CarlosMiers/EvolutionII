/*
 * To change this license header, choose License Headers in Project Properties.
 * To change this template file, choose Tools | Templates
 * and open the template in the editor.
 */
package Vista;

import Clases.ControlGrabado;
import Clases.ConvertirMayusculas;
import Clases.restarfechas;
import Clases.Detalle_cheques;
import Clases.Parametros;
import Clases.restarfechas;
import Conexion.Conexion;
import Conexion.ObtenerFecha;
import java.awt.event.KeyEvent;
import java.sql.Date;
import java.sql.ResultSet;
import java.sql.SQLException;
import java.sql.Statement;
import java.text.DecimalFormat;
import java.text.ParseException;
import java.text.SimpleDateFormat;
import java.util.Calendar;
import java.util.GregorianCalendar;
import javax.swing.ImageIcon;
import javax.swing.JOptionPane;
import jxl.write.DateTime;
import org.joda.time.Days;
import org.openide.util.Exceptions;

/**
 *
 * @author hp
 */
public class item_descuento_documentos extends javax.swing.JFrame {

    //INSTANCIAMOS LAS CLASES A UTILIZAR 
    Calendar c2 = new GregorianCalendar();
    Detalle_cheques cheques = new Detalle_cheques();
    SimpleDateFormat formatoFecha = new SimpleDateFormat("dd/MM/yyyy"); // FORMATO DE FECHA
    DecimalFormat formato = new DecimalFormat("#,###.##"); //FORMATO NUMERICO
    ObtenerFecha ODate = new ObtenerFecha(); //FORMATO DE FECHA PARA MYSQL
    Conexion con = null; //INICIALIZAMOS VARIABLES DE CONEXION
    Statement stm = null; //INICIALIZAMOS VARIABLES DE CONEXION

    ImageIcon iconograbar = new ImageIcon("src/Iconos/grabar.png");
    ImageIcon iconosalir = new ImageIcon("src/Iconos/salir.png");
    ImageIcon iconobuscar = new ImageIcon("src/Iconos/buscar.png");

    /**
     * Creates new form item_descuento_documentos
     */
    public item_descuento_documentos(String cOpcionItem) {
        initComponents();
        this.setLocationRelativeTo(null); //Centramos el formulario
        this.BuscarBanco.setIcon(iconobuscar);
        this.BuscarDocumento.setIcon(iconobuscar);
        this.BuscarInversor.setIcon(iconobuscar);
        this.GuardarItem.setIcon(iconograbar);
        this.SalirItem.setIcon(iconosalir);

        //Averiguamos si modificación de Item o uno nuevo
        this.OpcionGrabado.setVisible(false);
        this.valoractual.setEditable(false);
        this.OpcionGrabado.setText(cOpcionItem);
        ControlGrabado.REGISTRO_GRABADO = "NO";
        this.Inicio();
    }

    /**
     * This method is called from within the constructor to initialize the form.
     * WARNING: Do NOT modify this code. The content of this method is always
     * regenerated by the Form Editor.
     */
    @SuppressWarnings("unchecked")
    // <editor-fold defaultstate="collapsed" desc="Generated Code">//GEN-BEGIN:initComponents
    private void initComponents() {

        jPanel1 = new javax.swing.JPanel();
        jLabel1 = new javax.swing.JLabel();
        jLabel2 = new javax.swing.JLabel();
        jLabel3 = new javax.swing.JLabel();
        jLabel4 = new javax.swing.JLabel();
        jLabel5 = new javax.swing.JLabel();
        jLabel6 = new javax.swing.JLabel();
        jLabel7 = new javax.swing.JLabel();
        jLabel8 = new javax.swing.JLabel();
        jLabel9 = new javax.swing.JLabel();
        jLabel10 = new javax.swing.JLabel();
        jLabel11 = new javax.swing.JLabel();
        jLabel12 = new javax.swing.JLabel();
        jLabel13 = new javax.swing.JLabel();
        FechaEmision = new com.toedter.calendar.JDateChooser();
        Vencimiento = new com.toedter.calendar.JDateChooser();
        FechaCompra = new com.toedter.calendar.JDateChooser();
        nrodocumento = new javax.swing.JTextField();
        nrocuentacte = new javax.swing.JTextField();
        librador = new javax.swing.JTextField();
        importecheque = new javax.swing.JFormattedTextField();
        plazo = new javax.swing.JTextField();
        tasa = new javax.swing.JFormattedTextField();
        jLabel14 = new javax.swing.JLabel();
        descuentos = new javax.swing.JFormattedTextField();
        valoractual = new javax.swing.JFormattedTextField();
        acreedor = new javax.swing.JTextField();
        nombreacreedor = new javax.swing.JTextField();
        cargobanco = new javax.swing.JTextField();
        nombrebanco = new javax.swing.JTextField();
        tipodocumento = new javax.swing.JTextField();
        nombredocumento = new javax.swing.JTextField();
        BuscarDocumento = new javax.swing.JButton();
        BuscarBanco = new javax.swing.JButton();
        BuscarInversor = new javax.swing.JButton();
        OpcionGrabado = new javax.swing.JTextField();
        gastos = new javax.swing.JFormattedTextField();
        jLabel15 = new javax.swing.JLabel();
        jPanel2 = new javax.swing.JPanel();
        GuardarItem = new javax.swing.JButton();
        SalirItem = new javax.swing.JButton();

        setDefaultCloseOperation(javax.swing.WindowConstants.DISPOSE_ON_CLOSE);

        jPanel1.setBorder(javax.swing.BorderFactory.createBevelBorder(javax.swing.border.BevelBorder.RAISED));

        jLabel1.setText(org.openide.util.NbBundle.getMessage(item_descuento_documentos.class, "item_descuento_documentos.jLabel1.text")); // NOI18N

        jLabel2.setText(org.openide.util.NbBundle.getMessage(item_descuento_documentos.class, "item_descuento_documentos.jLabel2.text")); // NOI18N

        jLabel3.setText(org.openide.util.NbBundle.getMessage(item_descuento_documentos.class, "item_descuento_documentos.jLabel3.text")); // NOI18N

        jLabel4.setText(org.openide.util.NbBundle.getMessage(item_descuento_documentos.class, "item_descuento_documentos.jLabel4.text")); // NOI18N

        jLabel5.setText(org.openide.util.NbBundle.getMessage(item_descuento_documentos.class, "item_descuento_documentos.jLabel5.text")); // NOI18N

        jLabel6.setText(org.openide.util.NbBundle.getMessage(item_descuento_documentos.class, "item_descuento_documentos.jLabel6.text")); // NOI18N

        jLabel7.setText(org.openide.util.NbBundle.getMessage(item_descuento_documentos.class, "item_descuento_documentos.jLabel7.text")); // NOI18N

        jLabel8.setText(org.openide.util.NbBundle.getMessage(item_descuento_documentos.class, "item_descuento_documentos.jLabel8.text")); // NOI18N

        jLabel9.setText(org.openide.util.NbBundle.getMessage(item_descuento_documentos.class, "item_descuento_documentos.jLabel9.text")); // NOI18N

        jLabel10.setText(org.openide.util.NbBundle.getMessage(item_descuento_documentos.class, "item_descuento_documentos.jLabel10.text")); // NOI18N

        jLabel11.setText(org.openide.util.NbBundle.getMessage(item_descuento_documentos.class, "item_descuento_documentos.jLabel11.text")); // NOI18N

        jLabel12.setText(org.openide.util.NbBundle.getMessage(item_descuento_documentos.class, "item_descuento_documentos.jLabel12.text")); // NOI18N

        jLabel13.setText(org.openide.util.NbBundle.getMessage(item_descuento_documentos.class, "item_descuento_documentos.jLabel13.text")); // NOI18N

        FechaEmision.addKeyListener(new java.awt.event.KeyAdapter() {
            public void keyPressed(java.awt.event.KeyEvent evt) {
                FechaEmisionKeyPressed(evt);
            }
        });

        Vencimiento.addKeyListener(new java.awt.event.KeyAdapter() {
            public void keyPressed(java.awt.event.KeyEvent evt) {
                VencimientoKeyPressed(evt);
            }
            public void keyReleased(java.awt.event.KeyEvent evt) {
                VencimientoKeyReleased(evt);
            }
        });

        FechaCompra.addFocusListener(new java.awt.event.FocusAdapter() {
            public void focusGained(java.awt.event.FocusEvent evt) {
                FechaCompraFocusGained(evt);
            }
            public void focusLost(java.awt.event.FocusEvent evt) {
                FechaCompraFocusLost(evt);
            }
        });
        FechaCompra.addKeyListener(new java.awt.event.KeyAdapter() {
            public void keyReleased(java.awt.event.KeyEvent evt) {
                FechaCompraKeyReleased(evt);
            }
        });

        nrodocumento.setText(org.openide.util.NbBundle.getMessage(item_descuento_documentos.class, "item_descuento_documentos.nrodocumento.text")); // NOI18N
        nrodocumento.addFocusListener(new java.awt.event.FocusAdapter() {
            public void focusGained(java.awt.event.FocusEvent evt) {
                nrodocumentoFocusGained(evt);
            }
        });
        nrodocumento.addActionListener(new java.awt.event.ActionListener() {
            public void actionPerformed(java.awt.event.ActionEvent evt) {
                nrodocumentoActionPerformed(evt);
            }
        });
        nrodocumento.addKeyListener(new java.awt.event.KeyAdapter() {
            public void keyPressed(java.awt.event.KeyEvent evt) {
                nrodocumentoKeyPressed(evt);
            }
        });

        nrocuentacte.setText(org.openide.util.NbBundle.getMessage(item_descuento_documentos.class, "item_descuento_documentos.nrocuentacte.text")); // NOI18N
        nrocuentacte.addKeyListener(new java.awt.event.KeyAdapter() {
            public void keyPressed(java.awt.event.KeyEvent evt) {
                nrocuentacteKeyPressed(evt);
            }
        });

        librador.setText(org.openide.util.NbBundle.getMessage(item_descuento_documentos.class, "item_descuento_documentos.librador.text")); // NOI18N
        librador.addFocusListener(new java.awt.event.FocusAdapter() {
            public void focusGained(java.awt.event.FocusEvent evt) {
                libradorFocusGained(evt);
            }
        });
        librador.addKeyListener(new java.awt.event.KeyAdapter() {
            public void keyPressed(java.awt.event.KeyEvent evt) {
                libradorKeyPressed(evt);
            }
            public void keyReleased(java.awt.event.KeyEvent evt) {
                libradorKeyReleased(evt);
            }
        });

        importecheque.setFormatterFactory(new javax.swing.text.DefaultFormatterFactory(new javax.swing.text.NumberFormatter(new java.text.DecimalFormat("#,##0.00"))));
        importecheque.setText(org.openide.util.NbBundle.getMessage(item_descuento_documentos.class, "item_descuento_documentos.importecheque.text")); // NOI18N
        importecheque.addFocusListener(new java.awt.event.FocusAdapter() {
            public void focusLost(java.awt.event.FocusEvent evt) {
                importechequeFocusLost(evt);
            }
        });
        importecheque.addActionListener(new java.awt.event.ActionListener() {
            public void actionPerformed(java.awt.event.ActionEvent evt) {
                importechequeActionPerformed(evt);
            }
        });
        importecheque.addKeyListener(new java.awt.event.KeyAdapter() {
            public void keyPressed(java.awt.event.KeyEvent evt) {
                importechequeKeyPressed(evt);
            }
        });

        plazo.setHorizontalAlignment(javax.swing.JTextField.RIGHT);
        plazo.setText(org.openide.util.NbBundle.getMessage(item_descuento_documentos.class, "item_descuento_documentos.plazo.text")); // NOI18N
        plazo.addKeyListener(new java.awt.event.KeyAdapter() {
            public void keyPressed(java.awt.event.KeyEvent evt) {
                plazoKeyPressed(evt);
            }
        });

        tasa.setFormatterFactory(new javax.swing.text.DefaultFormatterFactory(new javax.swing.text.NumberFormatter(new java.text.DecimalFormat("#,##0.00"))));
        tasa.setHorizontalAlignment(javax.swing.JTextField.RIGHT);
        tasa.setText(org.openide.util.NbBundle.getMessage(item_descuento_documentos.class, "item_descuento_documentos.tasa.text")); // NOI18N
        tasa.setDisabledTextColor(new java.awt.Color(0, 0, 0));
        tasa.addKeyListener(new java.awt.event.KeyAdapter() {
            public void keyPressed(java.awt.event.KeyEvent evt) {
                tasaKeyPressed(evt);
            }
        });

        jLabel14.setText(org.openide.util.NbBundle.getMessage(item_descuento_documentos.class, "item_descuento_documentos.jLabel14.text")); // NOI18N

        descuentos.setFormatterFactory(new javax.swing.text.DefaultFormatterFactory(new javax.swing.text.NumberFormatter(new java.text.DecimalFormat("#,##0.00"))));
        descuentos.setHorizontalAlignment(javax.swing.JTextField.RIGHT);
        descuentos.setText(org.openide.util.NbBundle.getMessage(item_descuento_documentos.class, "item_descuento_documentos.descuentos.text")); // NOI18N
        descuentos.addFocusListener(new java.awt.event.FocusAdapter() {
            public void focusGained(java.awt.event.FocusEvent evt) {
                descuentosFocusGained(evt);
            }
        });
        descuentos.addKeyListener(new java.awt.event.KeyAdapter() {
            public void keyPressed(java.awt.event.KeyEvent evt) {
                descuentosKeyPressed(evt);
            }
        });

        valoractual.setFormatterFactory(new javax.swing.text.DefaultFormatterFactory(new javax.swing.text.NumberFormatter(new java.text.DecimalFormat("#,##0.00"))));
        valoractual.setHorizontalAlignment(javax.swing.JTextField.RIGHT);
        valoractual.setText(org.openide.util.NbBundle.getMessage(item_descuento_documentos.class, "item_descuento_documentos.valoractual.text")); // NOI18N
        valoractual.setDisabledTextColor(new java.awt.Color(255, 0, 51));
        valoractual.addKeyListener(new java.awt.event.KeyAdapter() {
            public void keyPressed(java.awt.event.KeyEvent evt) {
                valoractualKeyPressed(evt);
            }
        });

        acreedor.setText(org.openide.util.NbBundle.getMessage(item_descuento_documentos.class, "item_descuento_documentos.acreedor.text")); // NOI18N
        acreedor.addActionListener(new java.awt.event.ActionListener() {
            public void actionPerformed(java.awt.event.ActionEvent evt) {
                acreedorActionPerformed(evt);
            }
        });
        acreedor.addKeyListener(new java.awt.event.KeyAdapter() {
            public void keyPressed(java.awt.event.KeyEvent evt) {
                acreedorKeyPressed(evt);
            }
        });

        nombreacreedor.setBackground(new java.awt.Color(153, 153, 153));
        nombreacreedor.setText(org.openide.util.NbBundle.getMessage(item_descuento_documentos.class, "item_descuento_documentos.nombreacreedor.text")); // NOI18N
        nombreacreedor.setDisabledTextColor(new java.awt.Color(0, 0, 0));
        nombreacreedor.setEnabled(false);

        cargobanco.setHorizontalAlignment(javax.swing.JTextField.RIGHT);
        cargobanco.setText(org.openide.util.NbBundle.getMessage(item_descuento_documentos.class, "item_descuento_documentos.cargobanco.text")); // NOI18N
        cargobanco.addActionListener(new java.awt.event.ActionListener() {
            public void actionPerformed(java.awt.event.ActionEvent evt) {
                cargobancoActionPerformed(evt);
            }
        });
        cargobanco.addKeyListener(new java.awt.event.KeyAdapter() {
            public void keyPressed(java.awt.event.KeyEvent evt) {
                cargobancoKeyPressed(evt);
            }
        });

        nombrebanco.setBackground(new java.awt.Color(153, 153, 153));
        nombrebanco.setText(org.openide.util.NbBundle.getMessage(item_descuento_documentos.class, "item_descuento_documentos.nombrebanco.text")); // NOI18N
        nombrebanco.setDisabledTextColor(new java.awt.Color(0, 0, 0));
        nombrebanco.setEnabled(false);

        tipodocumento.setHorizontalAlignment(javax.swing.JTextField.RIGHT);
        tipodocumento.setText(org.openide.util.NbBundle.getMessage(item_descuento_documentos.class, "item_descuento_documentos.tipodocumento.text")); // NOI18N
        tipodocumento.addFocusListener(new java.awt.event.FocusAdapter() {
            public void focusGained(java.awt.event.FocusEvent evt) {
                tipodocumentoFocusGained(evt);
            }
        });
        tipodocumento.addActionListener(new java.awt.event.ActionListener() {
            public void actionPerformed(java.awt.event.ActionEvent evt) {
                tipodocumentoActionPerformed(evt);
            }
        });
        tipodocumento.addKeyListener(new java.awt.event.KeyAdapter() {
            public void keyPressed(java.awt.event.KeyEvent evt) {
                tipodocumentoKeyPressed(evt);
            }
        });

        nombredocumento.setBackground(new java.awt.Color(204, 204, 204));
        nombredocumento.setText(org.openide.util.NbBundle.getMessage(item_descuento_documentos.class, "item_descuento_documentos.nombredocumento.text")); // NOI18N
        nombredocumento.setDisabledTextColor(new java.awt.Color(0, 0, 0));
        nombredocumento.setEnabled(false);

        BuscarDocumento.setText(org.openide.util.NbBundle.getMessage(item_descuento_documentos.class, "item_descuento_documentos.BuscarDocumento.text")); // NOI18N
        BuscarDocumento.addActionListener(new java.awt.event.ActionListener() {
            public void actionPerformed(java.awt.event.ActionEvent evt) {
                BuscarDocumentoActionPerformed(evt);
            }
        });

        BuscarBanco.setText(org.openide.util.NbBundle.getMessage(item_descuento_documentos.class, "item_descuento_documentos.BuscarBanco.text")); // NOI18N
        BuscarBanco.addActionListener(new java.awt.event.ActionListener() {
            public void actionPerformed(java.awt.event.ActionEvent evt) {
                BuscarBancoActionPerformed(evt);
            }
        });

        BuscarInversor.setText(org.openide.util.NbBundle.getMessage(item_descuento_documentos.class, "item_descuento_documentos.BuscarInversor.text")); // NOI18N
        BuscarInversor.addActionListener(new java.awt.event.ActionListener() {
            public void actionPerformed(java.awt.event.ActionEvent evt) {
                BuscarInversorActionPerformed(evt);
            }
        });

        OpcionGrabado.setText(org.openide.util.NbBundle.getMessage(item_descuento_documentos.class, "item_descuento_documentos.OpcionGrabado.text")); // NOI18N

        gastos.setFormatterFactory(new javax.swing.text.DefaultFormatterFactory(new javax.swing.text.NumberFormatter(new java.text.DecimalFormat("#,##0.00"))));
        gastos.setHorizontalAlignment(javax.swing.JTextField.RIGHT);
        gastos.setText(org.openide.util.NbBundle.getMessage(item_descuento_documentos.class, "item_descuento_documentos.gastos.text")); // NOI18N
        gastos.addKeyListener(new java.awt.event.KeyAdapter() {
            public void keyPressed(java.awt.event.KeyEvent evt) {
                gastosKeyPressed(evt);
            }
        });

        jLabel15.setText(org.openide.util.NbBundle.getMessage(item_descuento_documentos.class, "item_descuento_documentos.jLabel15.text")); // NOI18N

        javax.swing.GroupLayout jPanel1Layout = new javax.swing.GroupLayout(jPanel1);
        jPanel1.setLayout(jPanel1Layout);
        jPanel1Layout.setHorizontalGroup(
            jPanel1Layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
            .addGroup(jPanel1Layout.createSequentialGroup()
                .addContainerGap()
                .addGroup(jPanel1Layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
                    .addComponent(jLabel1)
                    .addGroup(jPanel1Layout.createSequentialGroup()
                        .addGap(2, 2, 2)
                        .addGroup(jPanel1Layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING, false)
                            .addComponent(jLabel4)
                            .addComponent(nrodocumento, javax.swing.GroupLayout.PREFERRED_SIZE, 124, javax.swing.GroupLayout.PREFERRED_SIZE)
                            .addComponent(jLabel7)
                            .addComponent(nombredocumento, javax.swing.GroupLayout.PREFERRED_SIZE, 215, javax.swing.GroupLayout.PREFERRED_SIZE)
                            .addGroup(jPanel1Layout.createSequentialGroup()
                                .addComponent(tipodocumento, javax.swing.GroupLayout.PREFERRED_SIZE, 43, javax.swing.GroupLayout.PREFERRED_SIZE)
                                .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.RELATED)
                                .addComponent(BuscarDocumento, javax.swing.GroupLayout.PREFERRED_SIZE, 24, javax.swing.GroupLayout.PREFERRED_SIZE))
                            .addGroup(jPanel1Layout.createSequentialGroup()
                                .addGroup(jPanel1Layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
                                    .addGroup(jPanel1Layout.createParallelGroup(javax.swing.GroupLayout.Alignment.TRAILING, false)
                                        .addComponent(importecheque, javax.swing.GroupLayout.Alignment.LEADING)
                                        .addComponent(descuentos, javax.swing.GroupLayout.Alignment.LEADING, javax.swing.GroupLayout.PREFERRED_SIZE, 109, javax.swing.GroupLayout.PREFERRED_SIZE))
                                    .addComponent(jLabel9))
                                .addGap(18, 18, 18)
                                .addGroup(jPanel1Layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
                                    .addComponent(jLabel15)
                                    .addComponent(gastos)))))
                    .addComponent(OpcionGrabado, javax.swing.GroupLayout.PREFERRED_SIZE, 62, javax.swing.GroupLayout.PREFERRED_SIZE)
                    .addComponent(jLabel12)
                    .addComponent(FechaEmision, javax.swing.GroupLayout.PREFERRED_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.PREFERRED_SIZE))
                .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.RELATED, 38, Short.MAX_VALUE)
                .addGroup(jPanel1Layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
                    .addGroup(javax.swing.GroupLayout.Alignment.TRAILING, jPanel1Layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
                        .addGroup(javax.swing.GroupLayout.Alignment.TRAILING, jPanel1Layout.createSequentialGroup()
                            .addGroup(jPanel1Layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
                                .addComponent(jLabel5)
                                .addComponent(jLabel8)
                                .addComponent(nrocuentacte, javax.swing.GroupLayout.PREFERRED_SIZE, 129, javax.swing.GroupLayout.PREFERRED_SIZE)
                                .addGroup(jPanel1Layout.createParallelGroup(javax.swing.GroupLayout.Alignment.TRAILING, false)
                                    .addComponent(Vencimiento, javax.swing.GroupLayout.Alignment.LEADING, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, Short.MAX_VALUE)
                                    .addComponent(jLabel2, javax.swing.GroupLayout.Alignment.LEADING, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, Short.MAX_VALUE)))
                            .addGap(55, 55, 55)
                            .addGroup(jPanel1Layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
                                .addComponent(jLabel6)
                                .addComponent(jLabel3)
                                .addGroup(jPanel1Layout.createSequentialGroup()
                                    .addComponent(cargobanco, javax.swing.GroupLayout.PREFERRED_SIZE, 39, javax.swing.GroupLayout.PREFERRED_SIZE)
                                    .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.RELATED)
                                    .addComponent(BuscarBanco, javax.swing.GroupLayout.PREFERRED_SIZE, 21, javax.swing.GroupLayout.PREFERRED_SIZE))
                                .addComponent(FechaCompra, javax.swing.GroupLayout.PREFERRED_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.PREFERRED_SIZE))
                            .addGap(145, 145, 145))
                        .addGroup(jPanel1Layout.createParallelGroup(javax.swing.GroupLayout.Alignment.TRAILING)
                            .addGroup(javax.swing.GroupLayout.Alignment.LEADING, jPanel1Layout.createSequentialGroup()
                                .addGroup(jPanel1Layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
                                    .addComponent(jLabel13)
                                    .addGroup(jPanel1Layout.createSequentialGroup()
                                        .addComponent(valoractual, javax.swing.GroupLayout.PREFERRED_SIZE, 109, javax.swing.GroupLayout.PREFERRED_SIZE)
                                        .addGap(86, 86, 86)
                                        .addComponent(jLabel14, javax.swing.GroupLayout.PREFERRED_SIZE, 60, javax.swing.GroupLayout.PREFERRED_SIZE)))
                                .addContainerGap())
                            .addGroup(jPanel1Layout.createSequentialGroup()
                                .addGap(195, 195, 195)
                                .addGroup(jPanel1Layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
                                    .addComponent(nombreacreedor, javax.swing.GroupLayout.PREFERRED_SIZE, 202, javax.swing.GroupLayout.PREFERRED_SIZE)
                                    .addGroup(jPanel1Layout.createSequentialGroup()
                                        .addComponent(acreedor, javax.swing.GroupLayout.PREFERRED_SIZE, 100, javax.swing.GroupLayout.PREFERRED_SIZE)
                                        .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.RELATED)
                                        .addComponent(BuscarInversor, javax.swing.GroupLayout.PREFERRED_SIZE, 18, javax.swing.GroupLayout.PREFERRED_SIZE)))))
                        .addComponent(librador, javax.swing.GroupLayout.PREFERRED_SIZE, 307, javax.swing.GroupLayout.PREFERRED_SIZE))
                    .addGroup(javax.swing.GroupLayout.Alignment.TRAILING, jPanel1Layout.createSequentialGroup()
                        .addComponent(nombrebanco, javax.swing.GroupLayout.PREFERRED_SIZE, 213, javax.swing.GroupLayout.PREFERRED_SIZE)
                        .addGap(19, 19, 19))
                    .addGroup(jPanel1Layout.createSequentialGroup()
                        .addGroup(jPanel1Layout.createParallelGroup(javax.swing.GroupLayout.Alignment.TRAILING, false)
                            .addComponent(jLabel11, javax.swing.GroupLayout.Alignment.LEADING)
                            .addGroup(javax.swing.GroupLayout.Alignment.LEADING, jPanel1Layout.createSequentialGroup()
                                .addGap(3, 3, 3)
                                .addComponent(plazo, javax.swing.GroupLayout.PREFERRED_SIZE, 45, javax.swing.GroupLayout.PREFERRED_SIZE)))
                        .addGap(41, 41, 41)
                        .addGroup(jPanel1Layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
                            .addComponent(jLabel10)
                            .addComponent(tasa, javax.swing.GroupLayout.PREFERRED_SIZE, 58, javax.swing.GroupLayout.PREFERRED_SIZE)))))
        );
        jPanel1Layout.setVerticalGroup(
            jPanel1Layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
            .addGroup(jPanel1Layout.createSequentialGroup()
                .addGap(20, 20, 20)
                .addGroup(jPanel1Layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
                    .addGroup(jPanel1Layout.createSequentialGroup()
                        .addComponent(jLabel3)
                        .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.RELATED)
                        .addComponent(FechaCompra, javax.swing.GroupLayout.PREFERRED_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.PREFERRED_SIZE))
                    .addGroup(jPanel1Layout.createSequentialGroup()
                        .addComponent(jLabel2)
                        .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.RELATED)
                        .addComponent(Vencimiento, javax.swing.GroupLayout.PREFERRED_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.PREFERRED_SIZE))
                    .addGroup(jPanel1Layout.createSequentialGroup()
                        .addComponent(jLabel1)
                        .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.RELATED)
                        .addComponent(FechaEmision, javax.swing.GroupLayout.PREFERRED_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.PREFERRED_SIZE)))
                .addGap(18, 18, 18)
                .addGroup(jPanel1Layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
                    .addComponent(jLabel4)
                    .addComponent(jLabel5)
                    .addComponent(jLabel6))
                .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.RELATED)
                .addGroup(jPanel1Layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
                    .addGroup(jPanel1Layout.createSequentialGroup()
                        .addGroup(jPanel1Layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
                            .addComponent(nrocuentacte, javax.swing.GroupLayout.PREFERRED_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.PREFERRED_SIZE)
                            .addComponent(cargobanco, javax.swing.GroupLayout.PREFERRED_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.PREFERRED_SIZE)
                            .addComponent(BuscarBanco, javax.swing.GroupLayout.PREFERRED_SIZE, 20, javax.swing.GroupLayout.PREFERRED_SIZE))
                        .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.UNRELATED)
                        .addComponent(nombrebanco, javax.swing.GroupLayout.PREFERRED_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.PREFERRED_SIZE)
                        .addGap(8, 8, 8)
                        .addComponent(jLabel8)
                        .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.RELATED)
                        .addComponent(librador, javax.swing.GroupLayout.PREFERRED_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.PREFERRED_SIZE)
                        .addGap(108, 108, 108)
                        .addGroup(jPanel1Layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
                            .addGroup(jPanel1Layout.createParallelGroup(javax.swing.GroupLayout.Alignment.BASELINE)
                                .addComponent(jLabel13)
                                .addComponent(jLabel12))
                            .addComponent(jLabel14, javax.swing.GroupLayout.PREFERRED_SIZE, 16, javax.swing.GroupLayout.PREFERRED_SIZE)))
                    .addGroup(jPanel1Layout.createSequentialGroup()
                        .addComponent(nrodocumento, javax.swing.GroupLayout.PREFERRED_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.PREFERRED_SIZE)
                        .addGap(34, 34, 34)
                        .addComponent(jLabel7)
                        .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.RELATED)
                        .addGroup(jPanel1Layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
                            .addComponent(BuscarDocumento, javax.swing.GroupLayout.PREFERRED_SIZE, 20, javax.swing.GroupLayout.PREFERRED_SIZE)
                            .addGroup(jPanel1Layout.createSequentialGroup()
                                .addComponent(tipodocumento, javax.swing.GroupLayout.PREFERRED_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.PREFERRED_SIZE)
                                .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.RELATED)
                                .addComponent(nombredocumento, javax.swing.GroupLayout.PREFERRED_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.PREFERRED_SIZE)
                                .addGap(1, 1, 1)
                                .addGroup(jPanel1Layout.createParallelGroup(javax.swing.GroupLayout.Alignment.BASELINE)
                                    .addComponent(jLabel9)
                                    .addComponent(jLabel11)
                                    .addComponent(jLabel10)
                                    .addComponent(jLabel15))
                                .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.UNRELATED)
                                .addGroup(jPanel1Layout.createParallelGroup(javax.swing.GroupLayout.Alignment.BASELINE)
                                    .addComponent(importecheque, javax.swing.GroupLayout.PREFERRED_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.PREFERRED_SIZE)
                                    .addComponent(plazo, javax.swing.GroupLayout.PREFERRED_SIZE, 20, javax.swing.GroupLayout.PREFERRED_SIZE)
                                    .addComponent(tasa, javax.swing.GroupLayout.PREFERRED_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.PREFERRED_SIZE)
                                    .addComponent(gastos, javax.swing.GroupLayout.PREFERRED_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.PREFERRED_SIZE))
                                .addGap(56, 56, 56)
                                .addGroup(jPanel1Layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
                                    .addComponent(BuscarInversor, javax.swing.GroupLayout.PREFERRED_SIZE, 17, javax.swing.GroupLayout.PREFERRED_SIZE)
                                    .addGroup(jPanel1Layout.createParallelGroup(javax.swing.GroupLayout.Alignment.BASELINE)
                                        .addComponent(descuentos, javax.swing.GroupLayout.PREFERRED_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.PREFERRED_SIZE)
                                        .addComponent(valoractual, javax.swing.GroupLayout.PREFERRED_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.PREFERRED_SIZE)
                                        .addComponent(acreedor, javax.swing.GroupLayout.PREFERRED_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.PREFERRED_SIZE)))))))
                .addGap(10, 10, 10)
                .addGroup(jPanel1Layout.createParallelGroup(javax.swing.GroupLayout.Alignment.BASELINE)
                    .addComponent(nombreacreedor, javax.swing.GroupLayout.PREFERRED_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.PREFERRED_SIZE)
                    .addComponent(OpcionGrabado, javax.swing.GroupLayout.PREFERRED_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.PREFERRED_SIZE))
                .addContainerGap(14, Short.MAX_VALUE))
        );

        jPanel2.setBorder(javax.swing.BorderFactory.createBevelBorder(javax.swing.border.BevelBorder.RAISED));

        GuardarItem.setText(org.openide.util.NbBundle.getMessage(item_descuento_documentos.class, "item_descuento_documentos.GuardarItem.text")); // NOI18N
        GuardarItem.addFocusListener(new java.awt.event.FocusAdapter() {
            public void focusGained(java.awt.event.FocusEvent evt) {
                GuardarItemFocusGained(evt);
            }
        });
        GuardarItem.addActionListener(new java.awt.event.ActionListener() {
            public void actionPerformed(java.awt.event.ActionEvent evt) {
                GuardarItemActionPerformed(evt);
            }
        });

        SalirItem.setText(org.openide.util.NbBundle.getMessage(item_descuento_documentos.class, "item_descuento_documentos.SalirItem.text")); // NOI18N
        SalirItem.addActionListener(new java.awt.event.ActionListener() {
            public void actionPerformed(java.awt.event.ActionEvent evt) {
                SalirItemActionPerformed(evt);
            }
        });

        javax.swing.GroupLayout jPanel2Layout = new javax.swing.GroupLayout(jPanel2);
        jPanel2.setLayout(jPanel2Layout);
        jPanel2Layout.setHorizontalGroup(
            jPanel2Layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
            .addGroup(javax.swing.GroupLayout.Alignment.TRAILING, jPanel2Layout.createSequentialGroup()
                .addContainerGap(javax.swing.GroupLayout.DEFAULT_SIZE, Short.MAX_VALUE)
                .addComponent(GuardarItem)
                .addGap(37, 37, 37)
                .addComponent(SalirItem, javax.swing.GroupLayout.PREFERRED_SIZE, 76, javax.swing.GroupLayout.PREFERRED_SIZE)
                .addGap(47, 47, 47))
        );
        jPanel2Layout.setVerticalGroup(
            jPanel2Layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
            .addGroup(jPanel2Layout.createSequentialGroup()
                .addContainerGap()
                .addGroup(jPanel2Layout.createParallelGroup(javax.swing.GroupLayout.Alignment.BASELINE)
                    .addComponent(GuardarItem)
                    .addComponent(SalirItem))
                .addContainerGap(javax.swing.GroupLayout.DEFAULT_SIZE, Short.MAX_VALUE))
        );

        javax.swing.GroupLayout layout = new javax.swing.GroupLayout(getContentPane());
        getContentPane().setLayout(layout);
        layout.setHorizontalGroup(
            layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
            .addComponent(jPanel1, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, Short.MAX_VALUE)
            .addComponent(jPanel2, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, Short.MAX_VALUE)
        );
        layout.setVerticalGroup(
            layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
            .addGroup(layout.createSequentialGroup()
                .addComponent(jPanel1, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, Short.MAX_VALUE)
                .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.RELATED)
                .addComponent(jPanel2, javax.swing.GroupLayout.PREFERRED_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.PREFERRED_SIZE))
        );

        pack();
    }// </editor-fold>//GEN-END:initComponents

    private void nrodocumentoActionPerformed(java.awt.event.ActionEvent evt) {//GEN-FIRST:event_nrodocumentoActionPerformed
        // TODO add your handling code here:
    }//GEN-LAST:event_nrodocumentoActionPerformed

//    Calendar calendar = Calendar.getInstance();
    //   calendar.setTime(fecha); // Configuramos la fecha que se recibe
    //    calendar.add(Calendar.DAY_OF_YEAR, dias);  // numero de días a añadir, o restar en caso de días<0
//       return calendar.getTime(); // Devuelve el objeto Date con los nuevos días añadidos

    private void SalirItemActionPerformed(java.awt.event.ActionEvent evt) {//GEN-FIRST:event_SalirItemActionPerformed
        ControlGrabado.REGISTRO_GRABADO = "NO";
        this.dispose();
        // TODO add your handling code here:
    }//GEN-LAST:event_SalirItemActionPerformed

    private void Inicio() {
        //Alineamos a la derecha los campos numericos
        this.importecheque.setHorizontalAlignment(this.importecheque.RIGHT);
        this.descuentos.setHorizontalAlignment(this.descuentos.RIGHT);
        this.tasa.setHorizontalAlignment(this.tasa.RIGHT);
        this.valoractual.setHorizontalAlignment(this.valoractual.RIGHT);
        String cTipo = this.OpcionGrabado.getText();

        if (cTipo.isEmpty()) {
            try {
                this.FechaEmision.setDate(formatoFecha.parse(cheques.demision));
                this.FechaCompra.setDate(formatoFecha.parse(cheques.dcompra));
                this.Vencimiento.setDate(formatoFecha.parse(cheques.dvencimiento));
            } catch (ParseException ex) {
                Exceptions.printStackTrace(ex);
            }

            String cnimporte = cheques.nmonto_documento;
            cnimporte = cnimporte.replace(".", "");
            cnimporte = cnimporte.replace(",", ".");
            Double nimporte = Double.parseDouble(cnimporte);

            String cTasa = cheques.ntasa;
            cTasa = cTasa.replace(".", "");
            cTasa = cTasa.replace(",", ".");
            Double nTasa = Double.parseDouble(cTasa);

            String cDescuentos = cheques.ndescuento;
            cDescuentos = cDescuentos.replace(".", "");
            cDescuentos = cDescuentos.replace(",", ".");
            Double nDescuentos = Double.parseDouble(cDescuentos);

            String cValorActual = cheques.nvalor_actual;
            cValorActual = cValorActual.replace(".", "");
            cValorActual = cValorActual.replace(",", ".");
            Double nValorActual = Double.parseDouble(cValorActual);

            this.nrodocumento.setText(cheques.cnrodocumento);
            this.nrocuentacte.setText(cheques.cnrocuentacte);
            this.cargobanco.setText(cheques.ccargobanco);
            this.nombrebanco.setText(cheques.cnombrebanco);
            this.tipodocumento.setText(cheques.ccomprobante);
            this.nombredocumento.setText(cheques.cnombrecomprobante);
            this.librador.setText(cheques.clibrador);
            this.importecheque.setText(formato.format(nimporte));
            this.plazo.setText(cheques.nplazo);
            this.tasa.setText(formato.format(nTasa));
            this.valoractual.setText(formato.format(nValorActual));
            this.descuentos.setText(formato.format(nDescuentos));
            this.valoractual.setText(formato.format(nValorActual));
            this.acreedor.setText(cheques.nacreedor);
            this.nombreacreedor.setText(cheques.cnombrecliente);
            this.gastos.setText(cheques.cGastos);
        } else {
            this.FechaCompra.setCalendar(c2);
            this.FechaEmision.setCalendar(c2);
            this.Vencimiento.setCalendar(c2);
            this.cargobanco.setText("0");
        }
    }


    private void GuardarItemActionPerformed(java.awt.event.ActionEvent evt) {//GEN-FIRST:event_GuardarItemActionPerformed

        if (this.nrodocumento.getText().equals("")) {
            JOptionPane.showMessageDialog(null, "Ingrese el N° de Documento");
            this.nrodocumento.requestFocus();
            return;
        }
        if (this.nrocuentacte.getText().equals("")) {
            JOptionPane.showMessageDialog(null, "Ingrese el N° de Cuenta");
            this.nrocuentacte.requestFocus();
            return;
        }
        if (this.cargobanco.getText().equals("")) {
            JOptionPane.showMessageDialog(null, "Ingrese el Banco Emisor del Cheque");
            this.cargobanco.requestFocus();
            return;
        }
        if (this.tipodocumento.getText().equals("")) {
            JOptionPane.showMessageDialog(null, "Ingrese el Tipo de Documento");
            this.tipodocumento.requestFocus();
            return;
        }
        if (this.librador.getText().equals("")) {
            JOptionPane.showMessageDialog(null, "Ingrese el Nombre del Librador");
            this.librador.requestFocus();
            return;
        }
        if (this.importecheque.getText().equals("")) {
            JOptionPane.showMessageDialog(null, "Ingrese el Importe del Documento");
            this.importecheque.requestFocus();
            return;
        }
        if (this.plazo.getText().equals("")) {
            JOptionPane.showMessageDialog(null, "Ingrese el Plazo del Documento");
            this.plazo.requestFocus();
            return;
        }

        if (this.descuentos.getText().equals("")) {
            JOptionPane.showMessageDialog(null, "No fue Calculado el Importe a Descontar!!");
            this.descuentos.requestFocus();
            return;
        }
        if (this.valoractual.getText().equals("")) {
            JOptionPane.showMessageDialog(null, "Valor a Entregar está Vacio");
            this.valoractual.requestFocus();
            return;
        }
        if (this.acreedor.getText().equals("")) {
            JOptionPane.showMessageDialog(null, "Ingrese la Cuenta del Acreedor");
            this.acreedor.requestFocus();
            return;
        }

        ControlGrabado.REGISTRO_GRABADO = "SI";
        ///CAPTURAMOS Y ENVIAMOS LOS VALORES
        cheques.demision = new SimpleDateFormat("dd/MM/yyyy").format(this.FechaEmision.getDate());
        cheques.dcompra = new SimpleDateFormat("dd/MM/yyyy").format(this.FechaCompra.getDate());
        cheques.dvencimiento = new SimpleDateFormat("dd/MM/yyyy").format(this.Vencimiento.getDate());
        cheques.cnrodocumento = this.nrodocumento.getText();
        cheques.cnrocuentacte = this.nrocuentacte.getText();
        cheques.ccargobanco = this.cargobanco.getText();
        cheques.cnombrebanco = this.nombrebanco.getText();
        cheques.ccomprobante = this.tipodocumento.getText();
        cheques.cnombrecomprobante = this.nombredocumento.getText();
        cheques.clibrador = this.librador.getText();
        cheques.nmonto_documento = this.importecheque.getText();
        cheques.ntasa = this.tasa.getText();
        cheques.nplazo = this.plazo.getText();
        cheques.ndescuento = this.descuentos.getText();
        cheques.nvalor_actual = this.valoractual.getText();
        cheques.nacreedor = this.acreedor.getText();
        cheques.cnombrecliente = this.nombreacreedor.getText();
        cheques.cGastos = this.gastos.getText();
        // TODO add your handling code here:
        this.dispose();
    }//GEN-LAST:event_GuardarItemActionPerformed

    private void FechaCompraFocusLost(java.awt.event.FocusEvent evt) {//GEN-FIRST:event_FechaCompraFocusLost
        //SOLO ESTE SE UTILIZA
        // TODO add your handling code here:
    }//GEN-LAST:event_FechaCompraFocusLost

    private void BuscarBancoActionPerformed(java.awt.event.ActionEvent evt) {//GEN-FIRST:event_BuscarBancoActionPerformed
        Parametros.CODIGO_ELEGIDO = 0;
        Parametros.NOMBRE_ELEGIDO = "";
        Vista.ConsultaTablas cu = new Vista.ConsultaTablas("bancos_plaza");
        cu.setVisible(true);
        this.tipodocumento.requestFocus();        // TODO add your handling code here:

        // TODO add your handling code here:
    }//GEN-LAST:event_BuscarBancoActionPerformed

    private void tipodocumentoFocusGained(java.awt.event.FocusEvent evt) {//GEN-FIRST:event_tipodocumentoFocusGained
        if (Parametros.CODIGO_ELEGIDO != 0) {
            //Date dato = formatoFecha.parse(textoFecha);
            this.cargobanco.setText(Integer.toString(Parametros.CODIGO_ELEGIDO));
            this.nombrebanco.setText(Parametros.NOMBRE_ELEGIDO);
            Parametros.CODIGO_ELEGIDO = 0;
            Parametros.NOMBRE_ELEGIDO = "";
        }
        // TODO add your handling code here:
    }//GEN-LAST:event_tipodocumentoFocusGained

    private void cargobancoActionPerformed(java.awt.event.ActionEvent evt) {//GEN-FIRST:event_cargobancoActionPerformed
        con = new Conexion();
        stm = con.conectar();
        ResultSet results = null;
        try {
            results = stm.executeQuery("select codigo,nombre  from bancos_plaza where codigo=" + this.cargobanco.getText());
            if (results.next()) {
                this.nombrebanco.setText(results.getString("nombre"));
            } else {
                this.BuscarBanco.doClick();
            }
            stm.close();
        } catch (SQLException ex) {
            Exceptions.printStackTrace(ex);
            System.out.println(ex);
        }        // TODO add your handling code here:

        // TODO add your handling code here:
    }//GEN-LAST:event_cargobancoActionPerformed

    private void FechaEmisionKeyPressed(java.awt.event.KeyEvent evt) {//GEN-FIRST:event_FechaEmisionKeyPressed
        //SALTAMOS AL SIGUIENTE OBJETO 
        if (evt.getKeyCode() == 10 || evt.getKeyCode() == KeyEvent.VK_DOWN) {
            this.Vencimiento.requestFocus();
        }
        // TODO add your handling code here:
    }//GEN-LAST:event_FechaEmisionKeyPressed

    private void VencimientoKeyPressed(java.awt.event.KeyEvent evt) {//GEN-FIRST:event_VencimientoKeyPressed
        //SIGUIENTE OBJETO
        if (evt.getKeyCode() == 10 || evt.getKeyCode() == KeyEvent.VK_DOWN) {
            this.FechaCompra.requestFocus();
        }
        // RETROCEDER AL OBJETO ANTERIOR
        if (evt.getKeyCode() == KeyEvent.VK_UP) {
            this.FechaEmision.requestFocus();
        }        // TODO add your handling code here:
    }//GEN-LAST:event_VencimientoKeyPressed

    private void nrodocumentoKeyPressed(java.awt.event.KeyEvent evt) {//GEN-FIRST:event_nrodocumentoKeyPressed
        if (evt.getKeyCode() == 10 || evt.getKeyCode() == KeyEvent.VK_DOWN) {
            this.nrocuentacte.requestFocus();
        }
        // RETROCEDER AL OBJETO ANTERIOR
        if (evt.getKeyCode() == KeyEvent.VK_UP) {
            this.FechaCompra.requestFocus();
        }        // TODO add your handling code here:
        // TODO add your handling code here:
    }//GEN-LAST:event_nrodocumentoKeyPressed

    private void nrocuentacteKeyPressed(java.awt.event.KeyEvent evt) {//GEN-FIRST:event_nrocuentacteKeyPressed
        if (evt.getKeyCode() == 10 || evt.getKeyCode() == KeyEvent.VK_DOWN) {
            this.cargobanco.requestFocus();
        }
        // RETROCEDER AL OBJETO ANTERIOR
        if (evt.getKeyCode() == KeyEvent.VK_UP) {
            this.nrodocumento.requestFocus();
        }        // TODO add your handling code here:
        // TODO add your handling code here:        // TODO add your handling code here:
    }//GEN-LAST:event_nrocuentacteKeyPressed

    private void cargobancoKeyPressed(java.awt.event.KeyEvent evt) {//GEN-FIRST:event_cargobancoKeyPressed
        if (evt.getKeyCode() == 10 || evt.getKeyCode() == KeyEvent.VK_DOWN) {
            this.tipodocumento.requestFocus();
        }
        // RETROCEDER AL OBJETO ANTERIOR
        if (evt.getKeyCode() == KeyEvent.VK_UP) {
            this.nrocuentacte.requestFocus();
        }        // TODO add your handling code here:
        // TODO add your handling code here:        // TODO add your handling code here:
    }//GEN-LAST:event_cargobancoKeyPressed

    private void tipodocumentoKeyPressed(java.awt.event.KeyEvent evt) {//GEN-FIRST:event_tipodocumentoKeyPressed
        if (evt.getKeyCode() == 10 || evt.getKeyCode() == KeyEvent.VK_DOWN) {
            this.librador.requestFocus();
        }
        // RETROCEDER AL OBJETO ANTERIOR
        if (evt.getKeyCode() == KeyEvent.VK_UP) {
            this.cargobanco.requestFocus();
        }        // TODO add your handling code here:
        // TODO add your handling code here:        // TODO add your handling code here:
    }//GEN-LAST:event_tipodocumentoKeyPressed

    private void libradorKeyPressed(java.awt.event.KeyEvent evt) {//GEN-FIRST:event_libradorKeyPressed
        if (evt.getKeyCode() == 10 || evt.getKeyCode() == KeyEvent.VK_DOWN) {
            this.importecheque.requestFocus();
        }
        // RETROCEDER AL OBJETO ANTERIOR
        if (evt.getKeyCode() == KeyEvent.VK_UP) {
            this.tipodocumento.requestFocus();
        }        // TODO add your handling code here:
        // TODO add your handling code here:        // TODO add your handling code here:
    }//GEN-LAST:event_libradorKeyPressed

    private void importechequeKeyPressed(java.awt.event.KeyEvent evt) {//GEN-FIRST:event_importechequeKeyPressed
        if (evt.getKeyCode() == 10 || evt.getKeyCode() == KeyEvent.VK_DOWN) {
            this.gastos.requestFocus();
        }
        // RETROCEDER AL OBJETO ANTERIOR
        if (evt.getKeyCode() == KeyEvent.VK_UP) {
            this.librador.requestFocus();
        }        // TODO add your handling code here:
        // TODO add your handling code here:        // TODO add your handling code here:
    }//GEN-LAST:event_importechequeKeyPressed

    private void plazoKeyPressed(java.awt.event.KeyEvent evt) {//GEN-FIRST:event_plazoKeyPressed
        if (evt.getKeyCode() == 10 || evt.getKeyCode() == KeyEvent.VK_DOWN) {
            this.descuentos.requestFocus();
        }
        // RETROCEDER AL OBJETO ANTERIOR
        if (evt.getKeyCode() == KeyEvent.VK_UP) {
            this.gastos.requestFocus();
        }        // TODO add your handling code here:
        // TODO add your handling code here:        // TODO add your handling code here:
    }//GEN-LAST:event_plazoKeyPressed

    private void tasaKeyPressed(java.awt.event.KeyEvent evt) {//GEN-FIRST:event_tasaKeyPressed
        if (evt.getKeyCode() == 10 || evt.getKeyCode() == KeyEvent.VK_DOWN) {
            this.descuentos.requestFocus();
        }
        // RETROCEDER AL OBJETO ANTERIOR
        if (evt.getKeyCode() == KeyEvent.VK_UP) {
            this.plazo.requestFocus();
        }        // TODO add your handling code here:
        // TODO add your handling code here:        // TODO add your handling code here:
    }//GEN-LAST:event_tasaKeyPressed

    private void descuentosKeyPressed(java.awt.event.KeyEvent evt) {//GEN-FIRST:event_descuentosKeyPressed
        if (evt.getKeyCode() == 10 || evt.getKeyCode() == KeyEvent.VK_DOWN) {
            this.valoractual.requestFocus();
        }
        // RETROCEDER AL OBJETO ANTERIOR
        if (evt.getKeyCode() == KeyEvent.VK_UP) {
            this.plazo.requestFocus();
        }        // TODO add your handling code here:
        // TODO add your handling code here:        // TODO add your handling code here:
    }//GEN-LAST:event_descuentosKeyPressed

    private void valoractualKeyPressed(java.awt.event.KeyEvent evt) {//GEN-FIRST:event_valoractualKeyPressed
        if (evt.getKeyCode() == 10 || evt.getKeyCode() == KeyEvent.VK_DOWN) {
            this.acreedor.requestFocus();
        }
        // RETROCEDER AL OBJETO ANTERIOR
        if (evt.getKeyCode() == KeyEvent.VK_UP) {
            this.descuentos.requestFocus();
        }        // TODO add your handling code here:
        // TODO add your handling code here:        // TODO add your handling code here:
    }//GEN-LAST:event_valoractualKeyPressed

    private void acreedorKeyPressed(java.awt.event.KeyEvent evt) {//GEN-FIRST:event_acreedorKeyPressed
        // RETROCEDER AL OBJETO ANTERIOR
        if (evt.getKeyCode() == KeyEvent.VK_UP) {
            this.valoractual.requestFocus();
        }        // TODO add your handling code here:
        // TODO add your handling code here:
    }//GEN-LAST:event_acreedorKeyPressed

    private void BuscarDocumentoActionPerformed(java.awt.event.ActionEvent evt) {//GEN-FIRST:event_BuscarDocumentoActionPerformed
        Parametros.CODIGO_ELEGIDO = 0;
        Parametros.NOMBRE_ELEGIDO = "";
        Vista.ConsultaComprobantes cu = new Vista.ConsultaComprobantes("comprobantes");
        cu.setVisible(true);
        this.librador.requestFocus();            // TODO add your handling code here:
    }//GEN-LAST:event_BuscarDocumentoActionPerformed

    private void libradorFocusGained(java.awt.event.FocusEvent evt) {//GEN-FIRST:event_libradorFocusGained
        if (Parametros.CODIGO_ELEGIDO != 0) {
            //Date dato = formatoFecha.parse(textoFecha);
            this.tipodocumento.setText(Integer.toString(Parametros.CODIGO_ELEGIDO));
            this.nombredocumento.setText(Parametros.NOMBRE_ELEGIDO.trim());
            Parametros.CODIGO_ELEGIDO = 0;
            Parametros.NOMBRE_ELEGIDO = "";
            BusOperacion buscarop = new BusOperacion();
            buscarop.start();
        }        // TODO add your handling code here:
    }//GEN-LAST:event_libradorFocusGained

    private void tipodocumentoActionPerformed(java.awt.event.ActionEvent evt) {//GEN-FIRST:event_tipodocumentoActionPerformed
        BusOperacion buscarop = new BusOperacion();
        buscarop.start();
        // TODO add your handling code here:
    }//GEN-LAST:event_tipodocumentoActionPerformed

    private void BuscarInversorActionPerformed(java.awt.event.ActionEvent evt) {//GEN-FIRST:event_BuscarInversorActionPerformed
        Parametros.CODIGO_ELEGIDO = 0;
        Parametros.NOMBRE_ELEGIDO = "";
        Vista.ConsultaClientes2 cu = new Vista.ConsultaClientes2();
        cu.setVisible(true);
        this.GuardarItem.requestFocus();
        // TODO add your handling code here:
    }//GEN-LAST:event_BuscarInversorActionPerformed

    private void GuardarItemFocusGained(java.awt.event.FocusEvent evt) {//GEN-FIRST:event_GuardarItemFocusGained
        if (Parametros.CODIGO_ELEGIDO != 0) {
            this.acreedor.setText(Integer.toString(Parametros.CODIGO_ELEGIDO));
            this.nombreacreedor.setText(Parametros.NOMBRE_ELEGIDO);
            Parametros.CODIGO_ELEGIDO = 0;
            Parametros.NOMBRE_ELEGIDO = "";
        }
        // TODO add your handling code here:
    }//GEN-LAST:event_GuardarItemFocusGained

    private void acreedorActionPerformed(java.awt.event.ActionEvent evt) {//GEN-FIRST:event_acreedorActionPerformed
        con = new Conexion();
        stm = con.conectar();
        ResultSet results = null;
        try {
            results = stm.executeQuery("select codigo,nombre,telefono,direccion  from clientes where codigo=" + this.acreedor.getText());
            if (results.next()) {
                this.nombreacreedor.setText(results.getString("nombre"));
            } else {
                this.BuscarInversor.doClick();
            }
            stm.close();
        } catch (SQLException ex) {
            Exceptions.printStackTrace(ex);
            System.out.println(ex);
        }        // TODO add your handling code here:
        // TODO add your handling code here:
    }//GEN-LAST:event_acreedorActionPerformed

    private void FechaCompraFocusGained(java.awt.event.FocusEvent evt) {//GEN-FIRST:event_FechaCompraFocusGained
        // TODO add your handling code here:
    }//GEN-LAST:event_FechaCompraFocusGained

    private void libradorKeyReleased(java.awt.event.KeyEvent evt) {//GEN-FIRST:event_libradorKeyReleased
        String letras = ConvertirMayusculas.cadena(librador);
        librador.setText(letras);
        // TODO add your handling code here:
    }//GEN-LAST:event_libradorKeyReleased

    private void importechequeActionPerformed(java.awt.event.ActionEvent evt) {//GEN-FIRST:event_importechequeActionPerformed
        //ANTES DE CALCULAR LOS INTERESES PASAMOS A DOUBLE
        //Y LUEGO CALCULAMOS Y ACTUALIZAMOS EL CAMPO DE DESCUENTO CON LOS INTERESES
//        CalcularDescuento calculardescuento = new CalcularDescuento();
        //       Thread HiloDescuento = new Thread(calculardescuento);
        //       HiloDescuento.start();
    }//GEN-LAST:event_importechequeActionPerformed

    private void VencimientoKeyReleased(java.awt.event.KeyEvent evt) {//GEN-FIRST:event_VencimientoKeyReleased
        // TODO add your handling code here:
    }//GEN-LAST:event_VencimientoKeyReleased

    private void FechaCompraKeyReleased(java.awt.event.KeyEvent evt) {//GEN-FIRST:event_FechaCompraKeyReleased
        // TODO add your handling code here:
    }//GEN-LAST:event_FechaCompraKeyReleased

    private void importechequeFocusLost(java.awt.event.FocusEvent evt) {//GEN-FIRST:event_importechequeFocusLost
        // TODO add your handling code here:
    }//GEN-LAST:event_importechequeFocusLost

    private void nrodocumentoFocusGained(java.awt.event.FocusEvent evt) {//GEN-FIRST:event_nrodocumentoFocusGained
        java.util.Date fecha1, fecha2;
        final long MILLSECS_PER_DAY = 24 * 60 * 60 * 1000;
        fecha1 = this.FechaCompra.getDate();
        fecha2 = this.Vencimiento.getDate();
        long diferencia = (fecha2.getTime() - fecha1.getTime()) / MILLSECS_PER_DAY;
        this.plazo.setText(Long.toString(diferencia));

        // TODO add your handling code here:
    }//GEN-LAST:event_nrodocumentoFocusGained

    private void gastosKeyPressed(java.awt.event.KeyEvent evt) {//GEN-FIRST:event_gastosKeyPressed
        if (evt.getKeyCode() == 10 || evt.getKeyCode() == KeyEvent.VK_DOWN) {
            this.plazo.requestFocus();
        }
        // RETROCEDER AL OBJETO ANTERIOR
        if (evt.getKeyCode() == KeyEvent.VK_UP) {
            this.importecheque.requestFocus();
        }        // TODO add your handling code here:
        // TODO add your handling code here:
    }//GEN-LAST:event_gastosKeyPressed

    private void descuentosFocusGained(java.awt.event.FocusEvent evt) {//GEN-FIRST:event_descuentosFocusGained
        CalcularDescuento calculardescuento = new CalcularDescuento();
        Thread HiloDescuento = new Thread(calculardescuento);
        HiloDescuento.start();
        // TODO add your handling code here:
    }//GEN-LAST:event_descuentosFocusGained

    /**
     * @param args the command line arguments
     */
    public static void main(String args[]) {
        /* Set the Nimbus look and feel */
        //<editor-fold defaultstate="collapsed" desc=" Look and feel setting code (optional) ">
        /* If Nimbus (introduced in Java SE 6) is not available, stay with the default look and feel.
         * For details see http://download.oracle.com/javase/tutorial/uiswing/lookandfeel/plaf.html 
         */
        try {
            for (javax.swing.UIManager.LookAndFeelInfo info : javax.swing.UIManager.getInstalledLookAndFeels()) {
                if ("Nimbus".equals(info.getName())) {
                    javax.swing.UIManager.setLookAndFeel(info.getClassName());
                    break;
                }
            }
        } catch (ClassNotFoundException ex) {
            java.util.logging.Logger.getLogger(item_descuento_documentos.class.getName()).log(java.util.logging.Level.SEVERE, null, ex);
        } catch (InstantiationException ex) {
            java.util.logging.Logger.getLogger(item_descuento_documentos.class.getName()).log(java.util.logging.Level.SEVERE, null, ex);
        } catch (IllegalAccessException ex) {
            java.util.logging.Logger.getLogger(item_descuento_documentos.class.getName()).log(java.util.logging.Level.SEVERE, null, ex);
        } catch (javax.swing.UnsupportedLookAndFeelException ex) {
            java.util.logging.Logger.getLogger(item_descuento_documentos.class.getName()).log(java.util.logging.Level.SEVERE, null, ex);
        }
        //</editor-fold>

        /* Create and display the form */
        java.awt.EventQueue.invokeLater(new Runnable() {
            public void run() {
//                new item_descuento_documentos().setVisible(true);
            }
        });
    }

    // Variables declaration - do not modify//GEN-BEGIN:variables
    private javax.swing.JButton BuscarBanco;
    private javax.swing.JButton BuscarDocumento;
    private javax.swing.JButton BuscarInversor;
    private com.toedter.calendar.JDateChooser FechaCompra;
    private com.toedter.calendar.JDateChooser FechaEmision;
    private javax.swing.JButton GuardarItem;
    private javax.swing.JTextField OpcionGrabado;
    private javax.swing.JButton SalirItem;
    private com.toedter.calendar.JDateChooser Vencimiento;
    private javax.swing.JTextField acreedor;
    private javax.swing.JTextField cargobanco;
    private javax.swing.JFormattedTextField descuentos;
    private javax.swing.JFormattedTextField gastos;
    private javax.swing.JFormattedTextField importecheque;
    private javax.swing.JLabel jLabel1;
    private javax.swing.JLabel jLabel10;
    private javax.swing.JLabel jLabel11;
    private javax.swing.JLabel jLabel12;
    private javax.swing.JLabel jLabel13;
    private javax.swing.JLabel jLabel14;
    private javax.swing.JLabel jLabel15;
    private javax.swing.JLabel jLabel2;
    private javax.swing.JLabel jLabel3;
    private javax.swing.JLabel jLabel4;
    private javax.swing.JLabel jLabel5;
    private javax.swing.JLabel jLabel6;
    private javax.swing.JLabel jLabel7;
    private javax.swing.JLabel jLabel8;
    private javax.swing.JLabel jLabel9;
    private javax.swing.JPanel jPanel1;
    private javax.swing.JPanel jPanel2;
    private javax.swing.JTextField librador;
    private javax.swing.JTextField nombreacreedor;
    private javax.swing.JTextField nombrebanco;
    private javax.swing.JTextField nombredocumento;
    private javax.swing.JTextField nrocuentacte;
    private javax.swing.JTextField nrodocumento;
    private javax.swing.JTextField plazo;
    private javax.swing.JFormattedTextField tasa;
    private javax.swing.JTextField tipodocumento;
    private javax.swing.JFormattedTextField valoractual;
    // End of variables declaration//GEN-END:variables

    private class CalcularDescuento extends Thread {

        public void run() {

            String cImporte = importecheque.getText();
            cImporte = cImporte.replace(".", "");
            cImporte = cImporte.replace(",", ".");

            String cTasa = tasa.getText();
            cTasa = cTasa.replace(".", "");
            cTasa = cTasa.replace(",", ".");

            String cPlazo = plazo.getText();
            cPlazo = cPlazo.replace(".", "");
            cPlazo = cPlazo.replace(",", ".");

            double nCapital = Double.parseDouble(cImporte);//IMPORTE DEL CHEQUE
            double nPlazo = Double.parseDouble(cPlazo);//PLAZO
            double nTasa = Double.parseDouble(cTasa);//TASA
            double ninteres = Math.round(nCapital * (nTasa / 100) / 360 * nPlazo);//FORMULA PARA HALLAR LOS INTERESES A COBRAR

            descuentos.setText(formato.format(ninteres));//INTERES ACTUALIZADO
            valoractual.setText(formato.format(nCapital - ninteres));
            String cGastos = null;
            double nGastos = 0;
            con = new Conexion();
            stm = con.conectar();
            ResultSet results = null;

            try {
                results = stm.executeQuery("SELECT importei,importef,importegastos FROM config_gastos WHERE comprobante=" + tipodocumento.getText() + " and importei<=" + nCapital);

                while (results.next()) {
                    String cPl = results.getString("importef");
                    Double nPl = Double.parseDouble(cPl);
                    if (nCapital <= nPl) {
                        gastos.setText(formato.format(results.getDouble("importegastos")));
                        break;
                    }
                }
                stm.close();
            } catch (SQLException ex) {
                Exceptions.printStackTrace(ex);
                System.out.println(ex);
            }

        }
    }

    public class BusOperacion extends Thread {

        public void run() {

            con = new Conexion();
            stm = con.conectar();
            ResultSet results = null;
            try {
                results = stm.executeQuery("select codigo,nombre,tasainteres  from comprobantes where tipo=6 and codigo=" + tipodocumento.getText());
                if (results.next()) {
                    nombredocumento.setText(results.getString("nombre"));
                    tasa.setText(formato.format(results.getInt("tasainteres")));
                } else {
                    BuscarDocumento.doClick();
                }
                stm.close();
            } catch (SQLException ex) {
                Exceptions.printStackTrace(ex);
                System.out.println(ex);
            }        // TODO add your handling code here:
        }
    }
}
